import{u as e}from"./usePagination-4b9c5fb3.js";import{r as t}from"./service-01e4d977.js";import{t as n}from"./index-e0544542.js";import{H as i,i as r,g as s,R as o,Q as a,_ as l,r as c,o as d,a as h,b as u,k as f,l as p,n as g,F as m,y}from"./index-8c48cd14.js";const v="3.7.6",b=v,w="function"==typeof atob,_="function"==typeof btoa,C="function"==typeof Buffer,I="function"==typeof TextDecoder?new TextDecoder:void 0,A="function"==typeof TextEncoder?new TextEncoder:void 0,E=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),N=(e=>{let t={};return E.forEach(((e,n)=>t[e]=n)),t})(),k=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,S=String.fromCharCode.bind(String),x="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),T=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),D=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),R=e=>{let t,n,i,r,s="";const o=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|i<<8|r,s+=E[t>>18&63]+E[t>>12&63]+E[t>>6&63]+E[63&t]}return o?s.slice(0,o-3)+"===".substring(o):s},M=_?e=>btoa(e):C?e=>Buffer.from(e,"binary").toString("base64"):R,F=C?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,i=e.length;n<i;n+=4096)t.push(S.apply(null,e.subarray(n,n+4096)));return M(t.join(""))},O=(e,t=!1)=>t?T(F(e)):F(e),B=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?S(192|t>>>6)+S(128|63&t):S(224|t>>>12&15)+S(128|t>>>6&63)+S(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return S(240|t>>>18&7)+S(128|t>>>12&63)+S(128|t>>>6&63)+S(128|63&t)},z=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,U=e=>e.replace(z,B),Z=C?e=>Buffer.from(e,"utf8").toString("base64"):A?e=>F(A.encode(e)):e=>M(U(e)),L=(e,t=!1)=>t?T(Z(e)):Z(e),V=e=>L(e,!0),G=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,W=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return S(55296+(t>>>10))+S(56320+(1023&t));case 3:return S((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return S((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},$=e=>e.replace(G,W),K=e=>{if(e=e.replace(/\s+/g,""),!k.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n,i,r="";for(let s=0;s<e.length;)t=N[e.charAt(s++)]<<18|N[e.charAt(s++)]<<12|(n=N[e.charAt(s++)])<<6|(i=N[e.charAt(s++)]),r+=64===n?S(t>>16&255):64===i?S(t>>16&255,t>>8&255):S(t>>16&255,t>>8&255,255&t);return r},P=w?e=>atob(D(e)):C?e=>Buffer.from(e,"base64").toString("binary"):K,Y=C?e=>x(Buffer.from(e,"base64")):e=>x(P(e).split("").map((e=>e.charCodeAt(0)))),H=e=>Y(Q(e)),j=C?e=>Buffer.from(e,"base64").toString("utf8"):I?e=>I.decode(Y(e)):e=>$(P(e)),Q=e=>D(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),J=e=>j(Q(e)),X=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),q=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,X(t));e("fromBase64",(function(){return J(this)})),e("toBase64",(function(e){return L(this,e)})),e("toBase64URI",(function(){return L(this,!0)})),e("toBase64URL",(function(){return L(this,!0)})),e("toUint8Array",(function(){return H(this)}))},ee=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,X(t));e("toBase64",(function(e){return O(this,e)})),e("toBase64URI",(function(){return O(this,!0)})),e("toBase64URL",(function(){return O(this,!0)}))},te={version:v,VERSION:b,atob:P,atobPolyfill:K,btoa:M,btoaPolyfill:R,fromBase64:J,toBase64:L,encode:L,encodeURI:V,encodeURL:V,utob:U,btou:$,decode:J,isValid:e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:O,toUint8Array:H,extendString:q,extendUint8Array:ee,extendBuiltins:()=>{q(),ee()}};function ne(e){let t=e.length;for(;--t>=0;)e[t]=0}const ie=256,re=286,se=30,oe=15,ae=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),le=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ce=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),de=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),he=new Array(576);ne(he);const ue=new Array(60);ne(ue);const fe=new Array(512);ne(fe);const pe=new Array(256);ne(pe);const ge=new Array(29);ne(ge);const me=new Array(se);function ye(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let ve,be,we;function _e(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ne(me);const Ce=e=>e<256?fe[e]:fe[256+(e>>>7)],Ie=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Ae=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Ie(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Ee=(e,t,n)=>{Ae(e,n[2*t],n[2*t+1])},Ne=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},ke=(e,t,n)=>{const i=new Array(16);let r,s,o=0;for(r=1;r<=oe;r++)o=o+n[r-1]<<1,i[r]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=Ne(i[t]++,t))}},Se=e=>{let t;for(t=0;t<re;t++)e.dyn_ltree[2*t]=0;for(t=0;t<se;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},xe=e=>{e.bi_valid>8?Ie(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Te=(e,t,n,i)=>{const r=2*t,s=2*n;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},De=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&Te(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Te(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},Re=(e,t,n)=>{let i,r,s,o,a=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+a++],i+=(255&e.pending_buf[e.sym_buf+a++])<<8,r=e.pending_buf[e.sym_buf+a++],0===i?Ee(e,r,t):(s=pe[r],Ee(e,s+ie+1,t),o=ae[s],0!==o&&(r-=ge[s],Ae(e,r,o)),i--,s=Ce(i),Ee(e,s,n),o=le[s],0!==o&&(i-=me[s],Ae(e,i,o)))}while(a<e.sym_next);Ee(e,256,t)},Me=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)De(e,n,o);l=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],De(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[2*l]=n[2*o]+n[2*a],e.depth[l]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[2*o+1]=n[2*a+1]=l,e.heap[1]=l++,De(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,h,u,f,p,g=0;for(u=0;u<=oe;u++)e.bl_count[u]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],u=n[2*n[2*d+1]+1]+1,u>l&&(u=l,g++),n[2*d+1]=u,d>i||(e.bl_count[u]++,f=0,d>=a&&(f=o[d-a]),p=n[2*d],e.opt_len+=p*(u+f),s&&(e.static_len+=p*(r[2*d+1]+f)));if(0!==g){do{for(u=l-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(u=l;0!==u;u--)for(d=e.bl_count[u];0!==d;)h=e.heap[--c],h>i||(n[2*h+1]!==u&&(e.opt_len+=(u-n[2*h+1])*n[2*h],n[2*h+1]=u),d--)}})(e,t),ke(n,c,e.bl_count)},Fe=(e,t,n)=>{let i,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=t[2*(i+1)+1],++a<l&&r===o||(a<c?e.bl_tree[2*r]+=a:0!==r?(r!==s&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=r,0===o?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4))},Oe=(e,t,n)=>{let i,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),i=0;i<=n;i++)if(r=o,o=t[2*(i+1)+1],!(++a<l&&r===o)){if(a<c)do{Ee(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==s&&(Ee(e,r,e.bl_tree),a--),Ee(e,16,e.bl_tree),Ae(e,a-3,2)):a<=10?(Ee(e,17,e.bl_tree),Ae(e,a-3,3)):(Ee(e,18,e.bl_tree),Ae(e,a-11,7));a=0,s=r,0===o?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4)}};let Be=!1;const ze=(e,t,n,i)=>{Ae(e,0+(i?1:0),3),xe(e),Ie(e,n),Ie(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Ue={_tr_init:e=>{Be||((()=>{let e,t,n,i,r;const s=new Array(16);for(n=0,i=0;i<28;i++)for(ge[i]=n,e=0;e<1<<ae[i];e++)pe[n++]=i;for(pe[n-1]=i,r=0,i=0;i<16;i++)for(me[i]=r,e=0;e<1<<le[i];e++)fe[r++]=i;for(r>>=7;i<se;i++)for(me[i]=r<<7,e=0;e<1<<le[i]-7;e++)fe[256+r++]=i;for(t=0;t<=oe;t++)s[t]=0;for(e=0;e<=143;)he[2*e+1]=8,e++,s[8]++;for(;e<=255;)he[2*e+1]=9,e++,s[9]++;for(;e<=279;)he[2*e+1]=7,e++,s[7]++;for(;e<=287;)he[2*e+1]=8,e++,s[8]++;for(ke(he,287,s),e=0;e<se;e++)ue[2*e+1]=5,ue[2*e]=Ne(e,5);ve=new ye(he,ae,257,re,oe),be=new ye(ue,le,0,se,oe),we=new ye(new Array(0),ce,0,19,7)})(),Be=!0),e.l_desc=new _e(e.dyn_ltree,ve),e.d_desc=new _e(e.dyn_dtree,be),e.bl_desc=new _e(e.bl_tree,we),e.bi_buf=0,e.bi_valid=0,Se(e)},_tr_stored_block:ze,_tr_flush_block:(e,t,n,i)=>{let r,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<ie;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Me(e,e.l_desc),Me(e,e.d_desc),o=(e=>{let t;for(Fe(e,e.dyn_ltree,e.l_desc.max_code),Fe(e,e.dyn_dtree,e.d_desc.max_code),Me(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*de[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&-1!==t?ze(e,t,n,i):4===e.strategy||s===r?(Ae(e,2+(i?1:0),3),Re(e,he,ue)):(Ae(e,4+(i?1:0),3),((e,t,n,i)=>{let r;for(Ae(e,t-257,5),Ae(e,n-1,5),Ae(e,i-4,4),r=0;r<i;r++)Ae(e,e.bl_tree[2*de[r]+1],3);Oe(e,e.dyn_ltree,t-1),Oe(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Re(e,e.dyn_ltree,e.dyn_dtree)),Se(e),i&&xe(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(pe[n]+ie+1)]++,e.dyn_dtree[2*Ce(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{Ae(e,2,3),Ee(e,256,he),(e=>{16===e.bi_valid?(Ie(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var Ze=(e,t,n,i)=>{let r=65535&e|0,s=e>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{r=r+t[i++]|0,s=s+r|0}while(--o);r%=65521,s%=65521}return r|s<<16|0};const Le=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Ve=(e,t,n,i)=>{const r=Le,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[255&(e^t[o])];return-1^e},Ge={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},We={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:$e,_tr_stored_block:Ke,_tr_flush_block:Pe,_tr_tally:Ye,_tr_align:He}=Ue,{Z_NO_FLUSH:je,Z_PARTIAL_FLUSH:Qe,Z_FULL_FLUSH:Je,Z_FINISH:Xe,Z_BLOCK:qe,Z_OK:et,Z_STREAM_END:tt,Z_STREAM_ERROR:nt,Z_DATA_ERROR:it,Z_BUF_ERROR:rt,Z_DEFAULT_COMPRESSION:st,Z_FILTERED:ot,Z_HUFFMAN_ONLY:at,Z_RLE:lt,Z_FIXED:ct,Z_DEFAULT_STRATEGY:dt,Z_UNKNOWN:ht,Z_DEFLATED:ut}=We,ft=258,pt=262,gt=42,mt=113,yt=666,vt=(e,t)=>(e.msg=Ge[t],t),bt=e=>2*e-(e>4?9:0),wt=e=>{let t=e.length;for(;--t>=0;)e[t]=0},_t=e=>{let t,n,i,r=e.w_size;t=e.hash_size,i=t;do{n=e.head[--i],e.head[i]=n>=r?n-r:0}while(--t);t=r,i=t;do{n=e.prev[--i],e.prev[i]=n>=r?n-r:0}while(--t)};let Ct=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const It=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},At=(e,t)=>{Pe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,It(e.strm)},Et=(e,t)=>{e.pending_buf[e.pending++]=t},Nt=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},kt=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=Ze(e.adler,t,r,n):2===e.state.wrap&&(e.adler=Ve(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},St=(e,t)=>{let n,i,r=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-pt?e.strstart-(e.w_size-pt):0,c=e.window,d=e.w_mask,h=e.prev,u=e.strstart+ft;let f=c[s+o-1],p=c[s+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,c[n+o]===p&&c[n+o-1]===f&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<u);if(i=ft-(u-s),s=u-ft,i>o){if(e.match_start=t,o=i,i>=a)break;f=c[s+o-1],p=c[s+o]}}}while((t=h[t&d])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead},xt=e=>{const t=e.w_size;let n,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-pt)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),_t(e),i+=t),0===e.strm.avail_in)break;if(n=kt(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Ct(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Ct(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<pt&&0!==e.strm.avail_in)},Tt=(e,t)=>{let n,i,r,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(n=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>r&&(n=r),n<s&&(0===n&&t!==Xe||t===je||n!==i+e.strm.avail_in))break;o=t===Xe&&n===i+e.strm.avail_in?1:0,Ke(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,It(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(kt(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==je&&t!==Xe&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(kt(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,s=r>e.w_size?e.w_size:r,i=e.strstart-e.block_start,(i>=s||(i||t===Xe)&&t!==je&&0===e.strm.avail_in&&i<=r)&&(n=i>r?r:i,o=t===Xe&&0===e.strm.avail_in&&n===i?1:0,Ke(e,e.block_start,n,o),e.block_start+=n,It(e.strm)),o?3:1)},Dt=(e,t)=>{let n,i;for(;;){if(e.lookahead<pt){if(xt(e),e.lookahead<pt&&t===je)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Ct(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-pt&&(e.match_length=St(e,n)),e.match_length>=3)if(i=Ye(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Ct(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ct(e,e.ins_h,e.window[e.strstart+1]);else i=Ye(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(At(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Xe?(At(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(At(e,!1),0===e.strm.avail_out)?1:2},Rt=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<pt){if(xt(e),e.lookahead<pt&&t===je)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Ct(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-pt&&(e.match_length=St(e,n),e.match_length<=5&&(e.strategy===ot||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=Ye(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Ct(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(At(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=Ye(e,0,e.window[e.strstart-1]),i&&At(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Ye(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Xe?(At(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(At(e,!1),0===e.strm.avail_out)?1:2};function Mt(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const Ft=[new Mt(0,0,0,0,Tt),new Mt(4,4,8,4,Dt),new Mt(4,5,16,8,Dt),new Mt(4,6,32,32,Dt),new Mt(4,4,16,16,Rt),new Mt(8,16,32,32,Rt),new Mt(8,16,128,128,Rt),new Mt(8,32,128,256,Rt),new Mt(32,128,258,1024,Rt),new Mt(32,258,258,4096,Rt)];function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),wt(this.dyn_ltree),wt(this.dyn_dtree),wt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),wt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),wt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Bt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==gt&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==mt&&t.status!==yt?1:0},zt=e=>{if(Bt(e))return vt(e,nt);e.total_in=e.total_out=0,e.data_type=ht;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?gt:mt,e.adler=2===t.wrap?0:1,t.last_flush=-2,$e(t),et},Ut=e=>{const t=zt(e);var n;return t===et&&((n=e.state).window_size=2*n.w_size,wt(n.head),n.max_lazy_match=Ft[n.level].max_lazy,n.good_match=Ft[n.level].good_length,n.nice_match=Ft[n.level].nice_length,n.max_chain_length=Ft[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Zt=(e,t,n,i,r,s)=>{if(!e)return nt;let o=1;if(t===st&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>9||n!==ut||i<8||i>15||t<0||t>9||s<0||s>ct||8===i&&1!==o)return vt(e,nt);8===i&&(i=9);const a=new Ot;return e.state=a,a.strm=e,a.status=gt,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=n,Ut(e)};var Lt={deflateInit:(e,t)=>Zt(e,t,ut,15,8,dt),deflateInit2:Zt,deflateReset:Ut,deflateResetKeep:zt,deflateSetHeader:(e,t)=>Bt(e)||2!==e.state.wrap?nt:(e.state.gzhead=t,et),deflate:(e,t)=>{if(Bt(e)||t>qe||t<0)return e?vt(e,nt):nt;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===yt&&t!==Xe)return vt(e,0===e.avail_out?rt:nt);const i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(It(e),0===e.avail_out)return n.last_flush=-1,et}else if(0===e.avail_in&&bt(t)<=bt(i)&&t!==Xe)return vt(e,rt);if(n.status===yt&&0!==e.avail_in)return vt(e,rt);if(n.status===gt&&0===n.wrap&&(n.status=mt),n.status===gt){let t=ut+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=at||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=i<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Nt(n,t),0!==n.strstart&&(Nt(n,e.adler>>>16),Nt(n,65535&e.adler)),e.adler=1,n.status=mt,It(e),0!==n.pending)return n.last_flush=-1,et}if(57===n.status)if(e.adler=0,Et(n,31),Et(n,139),Et(n,8),n.gzhead)Et(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Et(n,255&n.gzhead.time),Et(n,n.gzhead.time>>8&255),Et(n,n.gzhead.time>>16&255),Et(n,n.gzhead.time>>24&255),Et(n,9===n.level?2:n.strategy>=at||n.level<2?4:0),Et(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Et(n,255&n.gzhead.extra.length),Et(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Ve(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Et(n,0),Et(n,0),Et(n,0),Et(n,0),Et(n,0),Et(n,9===n.level?2:n.strategy>=at||n.level<2?4:0),Et(n,3),n.status=mt,It(e),0!==n.pending)return n.last_flush=-1,et;if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Ve(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,It(e),0!==n.pending)return n.last_flush=-1,et;t=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=Ve(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Ve(e.adler,n.pending_buf,n.pending-i,i)),It(e),0!==n.pending)return n.last_flush=-1,et;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Et(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=Ve(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Ve(e.adler,n.pending_buf,n.pending-i,i)),It(e),0!==n.pending)return n.last_flush=-1,et;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Et(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=Ve(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(It(e),0!==n.pending))return n.last_flush=-1,et;Et(n,255&e.adler),Et(n,e.adler>>8&255),e.adler=0}if(n.status=mt,It(e),0!==n.pending)return n.last_flush=-1,et}if(0!==e.avail_in||0!==n.lookahead||t!==je&&n.status!==yt){let i=0===n.level?Tt(n,t):n.strategy===at?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(xt(e),0===e.lookahead)){if(t===je)return 1;break}if(e.match_length=0,n=Ye(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(At(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Xe?(At(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(At(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===lt?((e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=ft){if(xt(e),e.lookahead<=ft&&t===je)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+ft;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=ft-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Ye(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ye(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(At(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Xe?(At(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(At(e,!1),0===e.strm.avail_out)?1:2})(n,t):Ft[n.level].func(n,t);if(3!==i&&4!==i||(n.status=yt),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),et;if(2===i&&(t===Qe?He(n):t!==qe&&(Ke(n,0,0,!1),t===Je&&(wt(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),It(e),0===e.avail_out))return n.last_flush=-1,et}return t!==Xe?et:n.wrap<=0?tt:(2===n.wrap?(Et(n,255&e.adler),Et(n,e.adler>>8&255),Et(n,e.adler>>16&255),Et(n,e.adler>>24&255),Et(n,255&e.total_in),Et(n,e.total_in>>8&255),Et(n,e.total_in>>16&255),Et(n,e.total_in>>24&255)):(Nt(n,e.adler>>>16),Nt(n,65535&e.adler)),It(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?et:tt)},deflateEnd:e=>{if(Bt(e))return nt;const t=e.state.status;return e.state=null,t===mt?vt(e,it):et},deflateSetDictionary:(e,t)=>{let n=t.length;if(Bt(e))return nt;const i=e.state,r=i.wrap;if(2===r||1===r&&i.status!==gt||i.lookahead)return nt;if(1===r&&(e.adler=Ze(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(wt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,xt(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=Ct(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,xt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,et},deflateInfo:"pako deflate (from Nodeca project)"};const Vt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Gt={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Vt(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let t=e[i];n.set(t,r),r+=t.length}return n}};let Wt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(na){Wt=!1}const $t=new Uint8Array(256);for(let ra=0;ra<256;ra++)$t[ra]=ra>=252?6:ra>=248?5:ra>=240?4:ra>=224?3:ra>=192?2:1;$t[254]=$t[254]=1;var Kt={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const s=new Array(2*n);for(r=0,i=0;i<n;){let t=e[i++];if(t<128){s[r++]=t;continue}let o=$t[t];if(o>4)s[r++]=65533,i+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&i<n;)t=t<<6|63&e[i++],o--;o>1?s[r++]=65533:t<65536?s[r++]=t:(t-=65536,s[r++]=55296|t>>10&1023,s[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Wt)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(s,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+$t[e[n]]>t?n:t}};var Pt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Yt=Object.prototype.toString,{Z_NO_FLUSH:Ht,Z_SYNC_FLUSH:jt,Z_FULL_FLUSH:Qt,Z_FINISH:Jt,Z_OK:Xt,Z_STREAM_END:qt,Z_DEFAULT_COMPRESSION:en,Z_DEFAULT_STRATEGY:tn,Z_DEFLATED:nn}=We;function rn(e){this.options=Gt.assign({level:en,method:nn,chunkSize:16384,windowBits:15,memLevel:8,strategy:tn},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pt,this.strm.avail_out=0;let n=Lt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Xt)throw new Error(Ge[n]);if(t.header&&Lt.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Kt.string2buf(t.dictionary):"[object ArrayBuffer]"===Yt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Lt.deflateSetDictionary(this.strm,e),n!==Xt)throw new Error(Ge[n]);this._dict_set=!0}}function sn(e,t){const n=new rn(t);if(n.push(e,!0),n.err)throw n.msg||Ge[n.err];return n.result}rn.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Jt:Ht,"string"==typeof e?n.input=Kt.string2buf(e):"[object ArrayBuffer]"===Yt.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===jt||s===Qt)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=Lt.deflate(n,s),r===qt)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Lt.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Xt;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},rn.prototype.onData=function(e){this.chunks.push(e)},rn.prototype.onEnd=function(e){e===Xt&&(this.result=Gt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var on={Deflate:rn,deflate:sn,deflateRaw:function(e,t){return(t=t||{}).raw=!0,sn(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,sn(e,t)},constants:We};const an=16209;var ln=function(e,t){let n,i,r,s,o,a,l,c,d,h,u,f,p,g,m,y,v,b,w,_,C,I,A,E;const N=e.state;n=e.next_in,A=e.input,i=n+(e.avail_in-5),r=e.next_out,E=e.output,s=r-(t-e.avail_out),o=r+(e.avail_out-257),a=N.dmax,l=N.wsize,c=N.whave,d=N.wnext,h=N.window,u=N.hold,f=N.bits,p=N.lencode,g=N.distcode,m=(1<<N.lenbits)-1,y=(1<<N.distbits)-1;e:do{f<15&&(u+=A[n++]<<f,f+=8,u+=A[n++]<<f,f+=8),v=p[u&m];t:for(;;){if(b=v>>>24,u>>>=b,f-=b,b=v>>>16&255,0===b)E[r++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=p[(65535&v)+(u&(1<<b)-1)];continue t}if(32&b){N.mode=16191;break e}e.msg="invalid literal/length code",N.mode=an;break e}w=65535&v,b&=15,b&&(f<b&&(u+=A[n++]<<f,f+=8),w+=u&(1<<b)-1,u>>>=b,f-=b),f<15&&(u+=A[n++]<<f,f+=8,u+=A[n++]<<f,f+=8),v=g[u&y];n:for(;;){if(b=v>>>24,u>>>=b,f-=b,b=v>>>16&255,!(16&b)){if(0==(64&b)){v=g[(65535&v)+(u&(1<<b)-1)];continue n}e.msg="invalid distance code",N.mode=an;break e}if(_=65535&v,b&=15,f<b&&(u+=A[n++]<<f,f+=8,f<b&&(u+=A[n++]<<f,f+=8)),_+=u&(1<<b)-1,_>a){e.msg="invalid distance too far back",N.mode=an;break e}if(u>>>=b,f-=b,b=r-s,_>b){if(b=_-b,b>c&&N.sane){e.msg="invalid distance too far back",N.mode=an;break e}if(C=0,I=h,0===d){if(C+=l-b,b<w){w-=b;do{E[r++]=h[C++]}while(--b);C=r-_,I=E}}else if(d<b){if(C+=l+d-b,b-=d,b<w){w-=b;do{E[r++]=h[C++]}while(--b);if(C=0,d<w){b=d,w-=b;do{E[r++]=h[C++]}while(--b);C=r-_,I=E}}}else if(C+=d-b,b<w){w-=b;do{E[r++]=h[C++]}while(--b);C=r-_,I=E}for(;w>2;)E[r++]=I[C++],E[r++]=I[C++],E[r++]=I[C++],w-=3;w&&(E[r++]=I[C++],w>1&&(E[r++]=I[C++]))}else{C=r-_;do{E[r++]=E[C++],E[r++]=E[C++],E[r++]=E[C++],w-=3}while(w>2);w&&(E[r++]=E[C++],w>1&&(E[r++]=E[C++]))}break}}break}}while(n<i&&r<o);w=f>>3,n-=w,f-=w<<3,u&=(1<<f)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<o?o-r+257:257-(r-o),N.hold=u,N.bits=f};const cn=15,dn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),hn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),un=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var pn=(e,t,n,i,r,s,o,a)=>{const l=a.bits;let c,d,h,u,f,p,g=0,m=0,y=0,v=0,b=0,w=0,_=0,C=0,I=0,A=0,E=null;const N=new Uint16Array(16),k=new Uint16Array(16);let S,x,T,D=null;for(g=0;g<=cn;g++)N[g]=0;for(m=0;m<i;m++)N[t[n+m]]++;for(b=l,v=cn;v>=1&&0===N[v];v--);if(b>v&&(b=v),0===v)return r[s++]=20971520,r[s++]=20971520,a.bits=1,0;for(y=1;y<v&&0===N[y];y++);for(b<y&&(b=y),C=1,g=1;g<=cn;g++)if(C<<=1,C-=N[g],C<0)return-1;if(C>0&&(0===e||1!==v))return-1;for(k[1]=0,g=1;g<cn;g++)k[g+1]=k[g]+N[g];for(m=0;m<i;m++)0!==t[n+m]&&(o[k[t[n+m]]++]=m);if(0===e?(E=D=o,p=20):1===e?(E=dn,D=hn,p=257):(E=un,D=fn,p=0),A=0,m=0,g=y,f=s,w=b,_=0,h=-1,I=1<<b,u=I-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){S=g-_,o[m]+1<p?(x=0,T=o[m]):o[m]>=p?(x=D[o[m]-p],T=E[o[m]-p]):(x=96,T=0),c=1<<g-_,d=1<<w,y=d;do{d-=c,r[f+(A>>_)+d]=S<<24|x<<16|T|0}while(0!==d);for(c=1<<g-1;A&c;)c>>=1;if(0!==c?(A&=c-1,A+=c):A=0,m++,0==--N[g]){if(g===v)break;g=t[n+o[m]]}if(g>b&&(A&u)!==h){for(0===_&&(_=b),f+=y,w=g-_,C=1<<w;w+_<v&&(C-=N[w+_],!(C<=0));)w++,C<<=1;if(I+=1<<w,1===e&&I>852||2===e&&I>592)return 1;h=A&u,r[h]=b<<24|w<<16|f-s|0}}return 0!==A&&(r[f+A]=g-_<<24|64<<16|0),a.bits=b,0};const{Z_FINISH:gn,Z_BLOCK:mn,Z_TREES:yn,Z_OK:vn,Z_STREAM_END:bn,Z_NEED_DICT:wn,Z_STREAM_ERROR:_n,Z_DATA_ERROR:Cn,Z_MEM_ERROR:In,Z_BUF_ERROR:An,Z_DEFLATED:En}=We,Nn=16180,kn=16190,Sn=16191,xn=16192,Tn=16194,Dn=16199,Rn=16200,Mn=16206,Fn=16209,On=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Bn(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const zn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Nn||t.mode>16211?1:0},Un=e=>{if(zn(e))return _n;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Nn,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,vn},Zn=e=>{if(zn(e))return _n;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Un(e)},Ln=(e,t)=>{let n;if(zn(e))return _n;const i=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?_n:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,Zn(e))},Vn=(e,t)=>{if(!e)return _n;const n=new Bn;e.state=n,n.strm=e,n.window=null,n.mode=Nn;const i=Ln(e,t);return i!==vn&&(e.state=null),i};let Gn,Wn,$n=!0;const Kn=e=>{if($n){Gn=new Int32Array(512),Wn=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(pn(1,e.lens,0,288,Gn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;pn(2,e.lens,0,32,Wn,0,e.work,{bits:5}),$n=!1}e.lencode=Gn,e.lenbits=9,e.distcode=Wn,e.distbits=5},Pn=(e,t,n,i)=>{let r;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),(i-=r)?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0};var Yn={inflateReset:Zn,inflateReset2:Ln,inflateResetKeep:Un,inflateInit:e=>Vn(e,15),inflateInit2:Vn,inflate:(e,t)=>{let n,i,r,s,o,a,l,c,d,h,u,f,p,g,m,y,v,b,w,_,C,I,A=0;const E=new Uint8Array(4);let N,k;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(zn(e)||!e.output||!e.input&&0!==e.avail_in)return _n;n=e.state,n.mode===Sn&&(n.mode=xn),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,d=n.bits,h=a,u=l,I=vn;e:for(;;)switch(n.mode){case Nn:if(0===n.wrap){n.mode=xn;break}for(;d<16;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,E[0]=255&c,E[1]=c>>>8&255,n.check=Ve(n.check,E,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Fn;break}if((15&c)!==En){e.msg="unknown compression method",n.mode=Fn;break}if(c>>>=4,d-=4,C=8+(15&c),0===n.wbits&&(n.wbits=C),C>15||C>n.wbits){e.msg="invalid window size",n.mode=Fn;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:Sn,c=0,d=0;break;case 16181:for(;d<16;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==En){e.msg="unknown compression method",n.mode=Fn;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Fn;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,n.check=Ve(n.check,E,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,E[2]=c>>>16&255,E[3]=c>>>24&255,n.check=Ve(n.check,E,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,n.check=Ve(n.check,E,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,n.check=Ve(n.check,E,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>a&&(f=a),f&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+f),C)),512&n.flags&&4&n.wrap&&(n.check=Ve(n.check,i,f,s)),a-=f,s+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;f=0;do{C=i[s+f++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C))}while(C&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=Ve(n.check,i,f,s)),a-=f,s+=f,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;f=0;do{C=i[s+f++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C))}while(C&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=Ve(n.check,i,f,s)),a-=f,s+=f,C)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Fn;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Sn;break;case 16189:for(;d<32;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}e.adler=n.check=On(c),c=0,d=0,n.mode=kn;case kn:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=d,wn;e.adler=n.check=1,n.mode=Sn;case Sn:if(t===mn||t===yn)break e;case xn:if(n.last){c>>>=7&d,d-=7&d,n.mode=Mn;break}for(;d<3;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}switch(n.last=1&c,c>>>=1,d-=1,3&c){case 0:n.mode=16193;break;case 1:if(Kn(n),n.mode=Dn,t===yn){c>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Fn}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Fn;break}if(n.length=65535&c,c=0,d=0,n.mode=Tn,t===yn)break e;case Tn:n.mode=16195;case 16195:if(f=n.length,f){if(f>a&&(f=a),f>l&&(f=l),0===f)break e;r.set(i.subarray(s,s+f),o),a-=f,s+=f,l-=f,o+=f,n.length-=f;break}n.mode=Sn;break;case 16196:for(;d<14;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Fn;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}n.lens[S[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},I=pn(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,I){e.msg="invalid code lengths set",n.mode=Fn;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;A=n.lencode[c&(1<<n.lenbits)-1],m=A>>>24,y=A>>>16&255,v=65535&A,!(m<=d);){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if(v<16)c>>>=m,d-=m,n.lens[n.have++]=v;else{if(16===v){for(k=m+2;d<k;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if(c>>>=m,d-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=Fn;break}C=n.lens[n.have-1],f=3+(3&c),c>>>=2,d-=2}else if(17===v){for(k=m+3;d<k;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}c>>>=m,d-=m,C=0,f=3+(7&c),c>>>=3,d-=3}else{for(k=m+7;d<k;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}c>>>=m,d-=m,C=0,f=11+(127&c),c>>>=7,d-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Fn;break}for(;f--;)n.lens[n.have++]=C}}if(n.mode===Fn)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Fn;break}if(n.lenbits=9,N={bits:n.lenbits},I=pn(1,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,I){e.msg="invalid literal/lengths set",n.mode=Fn;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},I=pn(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,I){e.msg="invalid distances set",n.mode=Fn;break}if(n.mode=Dn,t===yn)break e;case Dn:n.mode=Rn;case Rn:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=d,ln(e,u),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,d=n.bits,n.mode===Sn&&(n.back=-1);break}for(n.back=0;A=n.lencode[c&(1<<n.lenbits)-1],m=A>>>24,y=A>>>16&255,v=65535&A,!(m<=d);){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if(y&&0==(240&y)){for(b=m,w=y,_=v;A=n.lencode[_+((c&(1<<b+w)-1)>>b)],m=A>>>24,y=A>>>16&255,v=65535&A,!(b+m<=d);){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=m,d-=m,n.back+=m,n.length=v,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=Sn;break}if(64&y){e.msg="invalid literal/length code",n.mode=Fn;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(k=n.extra;d<k;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;A=n.distcode[c&(1<<n.distbits)-1],m=A>>>24,y=A>>>16&255,v=65535&A,!(m<=d);){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if(0==(240&y)){for(b=m,w=y,_=v;A=n.distcode[_+((c&(1<<b+w)-1)>>b)],m=A>>>24,y=A>>>16&255,v=65535&A,!(b+m<=d);){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=m,d-=m,n.back+=m,64&y){e.msg="invalid distance code",n.mode=Fn;break}n.offset=v,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(k=n.extra;d<k;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Fn;break}n.mode=16204;case 16204:if(0===l)break e;if(f=u-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Fn;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=r,p=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{r[o++]=g[p++]}while(--f);0===n.length&&(n.mode=Rn);break;case 16205:if(0===l)break e;r[o++]=n.length,l--,n.mode=Rn;break;case Mn:if(n.wrap){for(;d<32;){if(0===a)break e;a--,c|=i[s++]<<d,d+=8}if(u-=l,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=n.flags?Ve(n.check,r,u,o-u):Ze(n.check,r,u,o-u)),u=l,4&n.wrap&&(n.flags?c:On(c))!==n.check){e.msg="incorrect data check",n.mode=Fn;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===a)break e;a--,c+=i[s++]<<d,d+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Fn;break}c=0,d=0}n.mode=16208;case 16208:I=bn;break e;case Fn:I=Cn;break e;case 16210:return In;default:return _n}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=d,(n.wsize||u!==e.avail_out&&n.mode<Fn&&(n.mode<Mn||t!==gn))&&Pn(e,e.output,e.next_out,u-e.avail_out),h-=e.avail_in,u-=e.avail_out,e.total_in+=h,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=n.flags?Ve(n.check,r,u,e.next_out-u):Ze(n.check,r,u,e.next_out-u)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Sn?128:0)+(n.mode===Dn||n.mode===Tn?256:0),(0===h&&0===u||t===gn)&&I===vn&&(I=An),I},inflateEnd:e=>{if(zn(e))return _n;let t=e.state;return t.window&&(t.window=null),e.state=null,vn},inflateGetHeader:(e,t)=>{if(zn(e))return _n;const n=e.state;return 0==(2&n.wrap)?_n:(n.head=t,t.done=!1,vn)},inflateSetDictionary:(e,t)=>{const n=t.length;let i,r,s;return zn(e)?_n:(i=e.state,0!==i.wrap&&i.mode!==kn?_n:i.mode===kn&&(r=1,r=Ze(r,t,n,0),r!==i.check)?Cn:(s=Pn(e,t,n,n),s?(i.mode=16210,In):(i.havedict=1,vn)))},inflateInfo:"pako inflate (from Nodeca project)"};var Hn=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const jn=Object.prototype.toString,{Z_NO_FLUSH:Qn,Z_FINISH:Jn,Z_OK:Xn,Z_STREAM_END:qn,Z_NEED_DICT:ei,Z_STREAM_ERROR:ti,Z_DATA_ERROR:ni,Z_MEM_ERROR:ii}=We;function ri(e){this.options=Gt.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pt,this.strm.avail_out=0;let n=Yn.inflateInit2(this.strm,t.windowBits);if(n!==Xn)throw new Error(Ge[n]);if(this.header=new Hn,Yn.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Kt.string2buf(t.dictionary):"[object ArrayBuffer]"===jn.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Yn.inflateSetDictionary(this.strm,t.dictionary),n!==Xn)))throw new Error(Ge[n])}function si(e,t){const n=new ri(t);if(n.push(e),n.err)throw n.msg||Ge[n.err];return n.result}ri.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Jn:Qn,"[object ArrayBuffer]"===jn.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=Yn.inflate(n,o),s===ei&&r&&(s=Yn.inflateSetDictionary(n,r),s===Xn?s=Yn.inflate(n,o):s===ni&&(s=ei));n.avail_in>0&&s===qn&&n.state.wrap>0&&0!==e[n.next_in];)Yn.inflateReset(n),s=Yn.inflate(n,o);switch(s){case ti:case ni:case ei:case ii:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===qn))if("string"===this.options.to){let e=Kt.utf8border(n.output,n.next_out),t=n.next_out-e,r=Kt.buf2string(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==Xn||0!==a){if(s===qn)return s=Yn.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},ri.prototype.onData=function(e){this.chunks.push(e)},ri.prototype.onEnd=function(e){e===Xn&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Gt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var oi={Inflate:ri,inflate:si,inflateRaw:function(e,t){return(t=t||{}).raw=!0,si(e,t)},ungzip:si,constants:We};const{Deflate:ai,deflate:li,deflateRaw:ci,gzip:di}=on,{Inflate:hi,inflate:ui,inflateRaw:fi,ungzip:pi}=oi;var gi={Deflate:ai,deflate:li,deflateRaw:ci,gzip:di,Inflate:hi,inflate:ui,inflateRaw:fi,ungzip:pi,constants:We};function mi(){}function yi(e,t){for(const n in t)e[n]=t[n];return e}function vi(e){return e()}function bi(){return Object.create(null)}function wi(e){e.forEach(vi)}function _i(e){return"function"==typeof e}function Ci(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function Ii(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function Ai(e,t){e.appendChild(t)}function Ei(e,t,n){e.insertBefore(t,n||null)}function Ni(e){e.parentNode.removeChild(e)}function ki(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Si(e){return document.createElement(e)}function xi(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ti(e){return document.createTextNode(e)}function Di(){return Ti(" ")}function Ri(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function Mi(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Fi(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Oi(e,t,n,i){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Bi(e,t,n){e.classList[n?"add":"remove"](t)}let zi;function Ui(e){zi=e}function Zi(){if(!zi)throw new Error("Function called outside component initialization");return zi}function Li(e){Zi().$$.on_mount.push(e)}function Vi(e){Zi().$$.on_destroy.push(e)}const Gi=[],Wi=[],$i=[],Ki=[],Pi=Promise.resolve();let Yi=!1;function Hi(e){$i.push(e)}const ji=new Set;let Qi=0;function Ji(){const e=zi;do{for(;Qi<Gi.length;){const e=Gi[Qi];Qi++,Ui(e),Xi(e.$$)}for(Ui(null),Gi.length=0,Qi=0;Wi.length;)Wi.pop()();for(let e=0;e<$i.length;e+=1){const t=$i[e];ji.has(t)||(ji.add(t),t())}$i.length=0}while(Gi.length);for(;Ki.length;)Ki.pop()();Yi=!1,ji.clear(),Ui(e)}function Xi(e){if(null!==e.fragment){e.update(),wi(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Hi)}}const qi=new Set;let er;function tr(){er={r:0,c:[],p:er}}function nr(){er.r||wi(er.c),er=er.p}function ir(e,t){e&&e.i&&(qi.delete(e),e.i(t))}function rr(e,t,n,i){if(e&&e.o){if(qi.has(e))return;qi.add(e),er.c.push((()=>{qi.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}function sr(e){e&&e.c()}function or(e,t,n,i){const{fragment:r,on_mount:s,on_destroy:o,after_update:a}=e.$$;r&&r.m(t,n),i||Hi((()=>{const t=s.map(vi).filter(_i);o?o.push(...t):wi(t),e.$$.on_mount=[]})),a.forEach(Hi)}function ar(e,t){const n=e.$$;null!==n.fragment&&(wi(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function lr(e,t,n,i,r,s,o,a=[-1]){const l=zi;Ui(e);const c=e.$$={fragment:null,ctx:null,props:s,update:mi,not_equal:r,bound:bi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:bi(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},((t,n,...i)=>{const s=i.length?i[0]:n;return c.ctx&&r(c.ctx[t],c.ctx[t]=s)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](s),d&&function(e,t){-1===e.$$.dirty[0]&&(Gi.push(e),Yi||(Yi=!0,Pi.then(Ji)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],c.update(),d=!0,wi(c.before_update),c.fragment=!!i&&i(c.ctx),t.target){if(t.hydrate){const e=(h=t.target,Array.from(h.childNodes));c.fragment&&c.fragment.l(e),e.forEach(Ni)}else c.fragment&&c.fragment.c();t.intro&&ir(e.$$.fragment),or(e,t.target,t.anchor,t.customElement),Ji()}var h;Ui(l)}class cr{$destroy(){ar(this,1),this.$destroy=mi}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var dr,hr;function ur(e){return e.nodeType===e.ELEMENT_NODE}(hr=dr||(dr={}))[hr.Document=0]="Document",hr[hr.DocumentType=1]="DocumentType",hr[hr.Element=2]="Element",hr[hr.Text=3]="Text",hr[hr.CDATA=4]="CDATA",hr[hr.Comment=5]="Comment";var fr=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var i=this.nodeMetaMap.get(n);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();var pr=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function gr(e,t){void 0===t&&(t={});var n=1,i=1;function r(e){var t=e.match(/\n/g);t&&(n+=t.length);var r=e.lastIndexOf("\n");i=-1===r?i+e.length:e.length-r}function s(){var e={line:n,column:i};return function(t){return t.position=new o(e),f(),t}}var o=function(e){this.start=e,this.end={line:n,column:i},this.source=t.source};o.prototype.content=e;var a=[];function l(r){var s=new Error("".concat(t.source||"",":").concat(n,":").concat(i,": ").concat(r));if(s.reason=r,s.filename=t.source,s.line=n,s.column=i,s.source=e,!t.silent)throw s;a.push(s)}function c(){return u(/^{\s*/)}function d(){return u(/^}/)}function h(){var t,n=[];for(f(),p(n);e.length&&"}"!==e.charAt(0)&&(t=E()||N());)!1!==t&&(n.push(t),p(n));return n}function u(t){var n=t.exec(e);if(n){var i=n[0];return r(i),e=e.slice(i.length),n}}function f(){u(/^\s*/)}function p(e){var t;for(void 0===e&&(e=[]);t=g();)!1!==t&&e.push(t),t=g();return e}function g(){var t=s();if("/"===e.charAt(0)&&"*"===e.charAt(1)){for(var n=2;""!==e.charAt(n)&&("*"!==e.charAt(n)||"/"!==e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return l("End of comment missing");var o=e.slice(2,n-2);return i+=2,r(o),e=e.slice(n),i+=2,t({type:"comment",comment:o})}}function m(){var e=u(/^([^{]+)/);if(e)return mr(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"")})).split(/\s*(?![^(]*\)),\s*/).map((function(e){return e.replace(/\u200C/g,",")}))}function y(){var e=s(),t=u(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){var n=mr(t[0]);if(!u(/^:\s*/))return l("property missing ':'");var i=u(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),r=e({type:"declaration",property:n.replace(pr,""),value:i?mr(i[0]).replace(pr,""):""});return u(/^[;\s]*/),r}}function v(){var e,t=[];if(!c())return l("missing '{'");for(p(t);e=y();)!1!==e&&(t.push(e),p(t)),e=y();return d()?t:l("missing '}'")}function b(){for(var e,t=[],n=s();e=u(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),u(/^,\s*/);if(t.length)return n({type:"keyframe",values:t,declarations:v()})}var w,_=A("import"),C=A("charset"),I=A("namespace");function A(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var n=s(),i=u(t);if(i){var r={type:e};return r[e]=i[1].trim(),n(r)}}}function E(){if("@"===e[0])return function(){var e=s(),t=u(/^@([-\w]+)?keyframes\s*/);if(t){var n=t[1];if(!(t=u(/^([-\w]+)\s*/)))return l("@keyframes missing name");var i,r=t[1];if(!c())return l("@keyframes missing '{'");for(var o=p();i=b();)o.push(i),o=o.concat(p());return d()?e({type:"keyframes",name:r,vendor:n,keyframes:o}):l("@keyframes missing '}'")}}()||function(){var e=s(),t=u(/^@media *([^{]+)/);if(t){var n=mr(t[1]);if(!c())return l("@media missing '{'");var i=p().concat(h());return d()?e({type:"media",media:n,rules:i}):l("@media missing '}'")}}()||function(){var e=s(),t=u(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:mr(t[1]),media:mr(t[2])})}()||function(){var e=s(),t=u(/^@supports *([^{]+)/);if(t){var n=mr(t[1]);if(!c())return l("@supports missing '{'");var i=p().concat(h());return d()?e({type:"supports",supports:n,rules:i}):l("@supports missing '}'")}}()||_()||C()||I()||function(){var e=s(),t=u(/^@([-\w]+)?document *([^{]+)/);if(t){var n=mr(t[1]),i=mr(t[2]);if(!c())return l("@document missing '{'");var r=p().concat(h());return d()?e({type:"document",document:i,vendor:n,rules:r}):l("@document missing '}'")}}()||function(){var e=s();if(u(/^@page */)){var t=m()||[];if(!c())return l("@page missing '{'");for(var n,i=p();n=y();)i.push(n),i=i.concat(p());return d()?e({type:"page",selectors:t,declarations:i}):l("@page missing '}'")}}()||function(){var e=s();if(u(/^@host\s*/)){if(!c())return l("@host missing '{'");var t=p().concat(h());return d()?e({type:"host",rules:t}):l("@host missing '}'")}}()||function(){var e=s();if(u(/^@font-face\s*/)){if(!c())return l("@font-face missing '{'");for(var t,n=p();t=y();)n.push(t),n=n.concat(p());return d()?e({type:"font-face",declarations:n}):l("@font-face missing '}'")}}()}function N(){var e=s(),t=m();return t?(p(),e({type:"rule",selectors:t,declarations:v()})):l("selector missing")}return yr((w=h(),{type:"stylesheet",stylesheet:{source:t.source,rules:w,parsingErrors:a}}))}function mr(e){return e?e.replace(/^\s+|\s+$/g,""):""}function yr(e,t){for(var n=e&&"string"==typeof e.type,i=n?e:t,r=0,s=Object.keys(e);r<s.length;r++){var o=e[s[r]];Array.isArray(o)?o.forEach((function(e){yr(e,i)})):o&&"object"==typeof o&&yr(o,i)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var vr={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"},br=/([^\\]):hover/,wr=new RegExp(br.source,"g");function _r(e,t){var n=null==t?void 0:t.stylesWithHoverClass.get(e);if(n)return n;var i=gr(e,{silent:!0});if(!i.stylesheet)return e;var r=[];if(i.stylesheet.rules.forEach((function(e){"selectors"in e&&(e.selectors||[]).forEach((function(e){br.test(e)&&r.push(e)}))})),0===r.length)return e;var s=new RegExp(r.filter((function(e,t){return r.indexOf(e)===t})).sort((function(e,t){return t.length-e.length})).map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})).join("|"),"g"),o=e.replace(s,(function(e){var t=e.replace(wr,"$1.\\:hover");return"".concat(e,", ").concat(t)}));return null==t||t.stylesWithHoverClass.set(e,o),o}function Cr(){return{stylesWithHoverClass:new Map}}function Ir(e,t){var n=t.doc,i=t.mirror,r=t.skipChild,s=void 0!==r&&r,o=t.hackCss,a=void 0===o||o,l=t.afterAppend,c=t.cache,d=function(e,t){var n,i,r=t.doc,s=t.hackCss,o=t.cache;switch(e.type){case dr.Document:return r.implementation.createDocument(null,"",null);case dr.DocumentType:return r.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case dr.Element:var a,l=("link"===(i=vr[(n=e).tagName]?vr[n.tagName]:n.tagName)&&n.attributes._cssText&&(i="style"),i);a=e.isSVG?r.createElementNS("http://www.w3.org/2000/svg",l):r.createElement(l);var c={};for(var d in e.attributes)if(Object.prototype.hasOwnProperty.call(e.attributes,d)){var h=e.attributes[d];if("option"!==l||"selected"!==d||!1!==h)if(!0===h&&(h=""),d.startsWith("rr_"))c[d]=h;else{var u="textarea"===l&&"value"===d,f="style"===l&&"_cssText"===d;if(f&&s&&"string"==typeof h&&(h=_r(h,o)),!u&&!f||"string"!=typeof h)try{if(e.isSVG&&"xlink:href"===d)a.setAttributeNS("http://www.w3.org/1999/xlink",d,h.toString());else if("onload"===d||"onclick"===d||"onmouse"===d.substring(0,7))a.setAttribute("_"+d,h.toString());else{if("meta"===l&&"Content-Security-Policy"===e.attributes["http-equiv"]&&"content"===d){a.setAttribute("csp-content",h.toString());continue}"link"===l&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===l&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")||("img"===l&&e.attributes.srcset&&e.attributes.rr_dataURL?a.setAttribute("rrweb-original-srcset",e.attributes.srcset):a.setAttribute(d,h.toString()))}}catch(n){}else{for(var p=r.createTextNode(h),g=0,m=Array.from(a.childNodes);g<m.length;g++){var y=m[g];y.nodeType===a.TEXT_NODE&&a.removeChild(y)}a.appendChild(p)}}}var v=function(t){var n=c[t];if("canvas"===l&&"rr_dataURL"===t){var i=document.createElement("img");i.onload=function(){var e=a.getContext("2d");e&&e.drawImage(i,0,0,i.width,i.height)},i.src=n.toString(),a.RRNodeType&&(a.rr_dataURL=n.toString())}else if("img"===l&&"rr_dataURL"===t){var r=a;r.currentSrc.startsWith("data:")||(r.setAttribute("rrweb-original-src",e.attributes.src),r.src=n.toString())}if("rr_width"===t)a.style.width=n.toString();else if("rr_height"===t)a.style.height=n.toString();else if("rr_mediaCurrentTime"===t&&"number"==typeof n)a.currentTime=n;else if("rr_mediaState"===t)switch(n){case"played":a.play().catch((function(e){return console.warn("media playback error",e)}));break;case"paused":a.pause()}};for(var b in c)v(b);if(e.isShadowHost)if(a.shadowRoot)for(;a.shadowRoot.firstChild;)a.shadowRoot.removeChild(a.shadowRoot.firstChild);else a.attachShadow({mode:"open"});return a;case dr.Text:return r.createTextNode(e.isStyle&&s?_r(e.textContent,o):e.textContent);case dr.CDATA:return r.createCDATASection(e.textContent);case dr.Comment:return r.createComment(e.textContent);default:return null}}(e,{doc:n,hackCss:a,cache:c});if(!d)return null;if(e.rootId&&i.getNode(e.rootId)!==n&&i.replace(e.rootId,n),e.type===dr.Document&&(n.close(),n.open(),"BackCompat"===e.compatMode&&e.childNodes&&e.childNodes[0].type!==dr.DocumentType&&(e.childNodes[0].type===dr.Element&&"xmlns"in e.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===e.childNodes[0].attributes.xmlns?n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),d=n),i.add(d,e),(e.type===dr.Document||e.type===dr.Element)&&!s)for(var h=0,u=e.childNodes;h<u.length;h++){var f=u[h],p=Ir(f,{doc:n,mirror:i,skipChild:!1,hackCss:a,afterAppend:l,cache:c});p?(f.isShadow&&ur(d)&&d.shadowRoot?d.shadowRoot.appendChild(p):d.appendChild(p),l&&l(p,f.id)):console.warn("Failed to rebuild",f)}return d}const Ar="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Er={map:{},getId:()=>(console.error(Ar),-1),getNode:()=>(console.error(Ar),null),removeNodeFromMap(){console.error(Ar)},has:()=>(console.error(Ar),!1),reset(){console.error(Ar)}};function Nr(e){const t={},n=(e,n)=>{const i={value:e,parent:n,children:[]};return t[e.node.id]=i,i},i=[];for(const r of e){const{nextId:e,parentId:s}=r;if(e&&e in t){const s=t[e];if(s.parent){const e=s.parent.children.indexOf(s);s.parent.children.splice(e,0,n(r,s.parent))}else{const e=i.indexOf(s);i.splice(e,0,n(r,null))}}else if(s in t){const e=t[s];e.children.push(n(r,e))}else i.push(n(r,null))}return i}function kr(e,t){t(e.value);for(let n=e.children.length-1;n>=0;n--)kr(e.children[n],t)}function Sr(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function xr(e,t){var n,i;const r=null===(i=null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===i?void 0:i.frameElement;if(!r||r===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const s=r.getBoundingClientRect(),o=xr(r,t),a=s.height/r.clientHeight;return{x:s.x*o.relativeScale+o.x,y:s.y*o.relativeScale+o.y,relativeScale:a,absoluteScale:o.absoluteScale*a}}function Tr(e){return Boolean(null==e?void 0:e.shadowRoot)}function Dr(e,t){const n=e[t[0]];return 1===t.length?n:Dr(n.cssRules[t[1]].cssRules,t.slice(2))}function Rr(e){const t=[...e],n=t.pop();return{positions:t,index:n}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Er=new Proxy(Er,{get:(e,t,n)=>("map"===t&&console.error(Ar),Reflect.get(e,t,n))}));class Mr{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var Fr=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Fr||{}),Or=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(Or||{}),Br=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Br||{}),zr=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(zr||{}),Ur=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(Ur||{});function Zr(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))}for(var Lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vr="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Gr=0;Gr<64;Gr++)Vr[Lr.charCodeAt(Gr)]=Gr;var Wr;try{var $r="undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof __non_webpack_require__&&__non_webpack_require__("worker_threads")||"function"==typeof require&&require("worker_threads");$r.Worker}catch(ia){}"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)&&function(e,t,n){var i,r,s=void 0===t?null:t,o=(i=e,r=void 0!==n&&n,Buffer.from(i,"base64").toString(r?"utf16":"utf8")),a=o.indexOf("\n",10)+1,l=o.substring(a)+(s?"//# sourceMappingURL="+s:"")}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",null,false),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Wr||(Wr={}));var Kr=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var i=this.nodeMetaMap.get(n);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Pr(e){const t=[];for(const n in e){const i=e[n];if("string"!=typeof i)continue;const r=Jr(n);t.push(`${r}: ${i};`)}return t.join(" ")}const Yr=/-([a-z])/g,Hr=/^--[a-zA-Z0-9-]+$/,jr=e=>Hr.test(e)?e:e.replace(Yr,((e,t)=>t?t.toUpperCase():"")),Qr=/\B([A-Z])/g,Jr=e=>e.replace(Qr,"-$1").toLowerCase();class Xr{constructor(...e){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=ss.ELEMENT_NODE,this.TEXT_NODE=ss.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){const e=this.parentNode;if(!e)return null;const t=e.childNodes,n=t.indexOf(this);return t[n+1]||null}contains(e){if(e===this)return!0;for(const t of this.childNodes)if(t.contains(e))return!0;return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function qr(e){return class extends e{constructor(e,t,n){super(),this.nodeType=ss.DOCUMENT_TYPE_NODE,this.RRNodeType=Wr.DocumentType,this.textContent=null,this.name=e,this.publicId=t,this.systemId=n,this.nodeName=e}toString(){return"RRDocumentType"}}}function es(e){return class extends e{constructor(e){super(),this.nodeType=ss.ELEMENT_NODE,this.RRNodeType=Wr.Element,this.attributes={},this.shadowRoot=null,this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach((t=>e+=t.textContent)),e}set textContent(e){this.childNodes=[this.ownerDocument.createTextNode(e)]}get classList(){return new rs(this.attributes.class,(e=>{this.attributes.class=e}))}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?function(e){const t={},n=/:(.+)/;return e.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach((function(e){if(e){const i=e.split(n);i.length>1&&(t[jr(i[0].trim())]=i[1].trim())}})),t}(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(n,i,r)=>{if(t.test(n))return;const s=jr(n);i?e[s]=i:delete e[s],"important"===r&&(e[s]+=" !important"),this.attributes.style=Pr(e)},e.removeProperty=n=>{if(t.test(n))return"";const i=jr(n),r=e[i]||"";return delete e[i],this.attributes.style=Pr(e),r},e}getAttribute(e){return this.attributes[e]||null}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,n){this.setAttribute(t,n)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return this.childNodes.push(e),e.parentNode=this,e.parentElement=this,e}insertBefore(e,t){if(null===t)return this.appendChild(e);const n=this.childNodes.indexOf(t);if(-1==n)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(n,0,e),e.parentElement=this,e.parentNode=this,e}removeChild(e){const t=this.childNodes.indexOf(e);if(-1===t)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(t,1),e.parentElement=null,e.parentNode=null,e}attachShadow(e){const t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(const t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}}}function ts(e){return class extends e{constructor(e){super(),this.nodeType=ss.TEXT_NODE,this.nodeName="#text",this.RRNodeType=Wr.Text,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function ns(e){return class extends e{constructor(e){super(),this.nodeType=ss.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=Wr.Comment,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function is(e){return class extends e{constructor(e){super(),this.nodeName="#cdata-section",this.nodeType=ss.CDATA_SECTION_NODE,this.RRNodeType=Wr.CDATA,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class rs{constructor(e,t){if(this.classes=[],this.add=(...e)=>{for(const t of e){const e=String(t);this.classes.indexOf(e)>=0||this.classes.push(e)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...e)=>{this.classes=this.classes.filter((t=>-1===e.indexOf(t))),this.onChange&&this.onChange(this.classes.join(" "))},e){const t=e.trim().split(/\s+/);this.classes.push(...t)}this.onChange=t}}var ss;!function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(ss||(ss={}));const os={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},as={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function ls(e,t,n,i){const r=e.childNodes,s=t.childNodes;i=i||t.mirror||t.ownerDocument.mirror,(r.length>0||s.length>0)&&cs(Array.from(r),s,e,n,i);let o=null,a=null;switch(t.RRNodeType){case Wr.Document:a=t.scrollData;break;case Wr.Element:{const r=e,s=t;switch(function(e,t,n){const i=e.attributes,r=t.attributes;for(const s in r){const i=r[s],o=n.getMeta(t);if(o&&"isSVG"in o&&o.isSVG&&os[s])e.setAttributeNS(os[s],s,i);else if("CANVAS"===t.tagName&&"rr_dataURL"===s){const t=document.createElement("img");t.src=i,t.onload=()=>{const n=e.getContext("2d");n&&n.drawImage(t,0,0,t.width,t.height)}}else e.setAttribute(s,i)}for(const{name:s}of Array.from(i))s in r||e.removeAttribute(s);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}(r,s,i),a=s.scrollData,o=s.inputData,s.tagName){case"AUDIO":case"VIDEO":{const t=e,n=s;void 0!==n.paused&&(n.paused?t.pause():t.play()),void 0!==n.muted&&(t.muted=n.muted),void 0!==n.volume&&(t.volume=n.volume),void 0!==n.currentTime&&(t.currentTime=n.currentTime),void 0!==n.playbackRate&&(t.playbackRate=n.playbackRate);break}case"CANVAS":{const i=t;if(null!==i.rr_dataURL){const e=document.createElement("img");e.onload=()=>{const t=r.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=i.rr_dataURL}i.canvasMutations.forEach((t=>n.applyCanvas(t.event,t.mutation,e)))}break;case"STYLE":{const e=r.sheet;e&&t.rules.forEach((t=>n.applyStyleSheetMutation(t,e)))}}if(s.shadowRoot){r.shadowRoot||r.attachShadow({mode:"open"});const e=r.shadowRoot.childNodes,t=s.shadowRoot.childNodes;(e.length>0||t.length>0)&&cs(Array.from(e),t,r.shadowRoot,n,i)}break}case Wr.Text:case Wr.Comment:case Wr.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}if(a&&n.applyScroll(a,!0),o&&n.applyInput(o),"IFRAME"===t.nodeName){const r=e.contentDocument,s=t;if(r){const e=i.getMeta(s.contentDocument);e&&n.mirror.add(r,Object.assign({},e)),ls(r,s.contentDocument,n,i)}}}function cs(e,t,n,i,r){var s;let o,a,l=0,c=e.length-1,d=0,h=t.length-1,u=e[l],f=e[c],p=t[d],g=t[h];for(;l<=c&&d<=h;){const m=i.mirror.getId(u),y=i.mirror.getId(f),v=r.getId(p),b=r.getId(g);if(void 0===u)u=e[++l];else if(void 0===f)f=e[--c];else if(-1!==m&&m===v)ls(u,p,i,r),u=e[++l],p=t[++d];else if(-1!==y&&y===b)ls(f,g,i,r),f=e[--c],g=t[--h];else if(-1!==m&&m===b)n.insertBefore(u,f.nextSibling),ls(u,g,i,r),u=e[++l],g=t[--h];else if(-1!==y&&y===v)n.insertBefore(f,u),ls(f,p,i,r),f=e[--c],p=t[++d];else{if(!o){o={};for(let t=l;t<=c;t++){const n=e[t];n&&i.mirror.hasNode(n)&&(o[i.mirror.getId(n)]=t)}}if(a=o[r.getId(p)],a){const t=e[a];n.insertBefore(t,u),ls(t,p,i,r),e[a]=void 0}else{const t=ds(p,i.mirror,r);"#document"===n.nodeName&&(null===(s=i.mirror.getMeta(t))||void 0===s?void 0:s.type)===Wr.Element&&n.documentElement&&(n.removeChild(n.documentElement),e[l]=void 0,u=void 0),n.insertBefore(t,u||null),ls(t,p,i,r)}p=t[++d]}}if(l>c){const e=t[h+1];let s=null;for(e&&n.childNodes.forEach((t=>{i.mirror.getId(t)===r.getId(e)&&(s=t)}));d<=h;++d){const e=ds(t[d],i.mirror,r);n.insertBefore(e,s),ls(e,t[d],i,r)}}else if(d>h)for(;l<=c;l++){const t=e[l];t&&(n.removeChild(t),i.mirror.removeNodeFromMap(t))}}function ds(e,t,n){const i=n.getId(e),r=n.getMeta(e);let s=null;if(i>-1&&(s=t.getNode(i)),null!==s)return s;switch(e.RRNodeType){case Wr.Document:s=new Document;break;case Wr.DocumentType:s=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case Wr.Element:{let t=e.tagName.toLowerCase();t=as[t]||t,s=r&&"isSVG"in r&&(null==r?void 0:r.isSVG)?document.createElementNS(os.svg,t):document.createElement(e.tagName);break}case Wr.Text:s=document.createTextNode(e.data);break;case Wr.Comment:s=document.createComment(e.data);break;case Wr.CDATA:s=document.createCDATASection(e.data)}return r&&t.add(s,Object.assign({},r)),s}class hs extends(function(e){return class t extends e{constructor(){super(...arguments),this.nodeType=ss.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=Wr.Document,this.textContent=null}get documentElement(){return this.childNodes.find((e=>e.RRNodeType===Wr.Element&&"HTML"===e.tagName))||null}get body(){var e;return(null===(e=this.documentElement)||void 0===e?void 0:e.childNodes.find((e=>e.RRNodeType===Wr.Element&&"BODY"===e.tagName)))||null}get head(){var e;return(null===(e=this.documentElement)||void 0===e?void 0:e.childNodes.find((e=>e.RRNodeType===Wr.Element&&"HEAD"===e.tagName)))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){const t=e.RRNodeType;if((t===Wr.Element||t===Wr.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===t)))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===Wr.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);return e.parentElement=null,e.parentNode=this,this.childNodes.push(e),e}insertBefore(e,t){const n=e.RRNodeType;if((n===Wr.Element||n===Wr.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===n)))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${n===Wr.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(null===t)return this.appendChild(e);const i=this.childNodes.indexOf(t);if(-1==i)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(i,0,e),e.parentElement=null,e.parentNode=this,e}removeChild(e){const t=this.childNodes.indexOf(e);if(-1===t)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(t,1),e.parentElement=null,e.parentNode=null,e}open(){this.childNodes=[]}close(){}write(e){let t;if('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'===e?t="-//W3C//DTD XHTML 1.0 Transitional//EN":'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'===e&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){const e=this.createDocumentType("html",t,"");this.open(),this.appendChild(e)}}createDocument(e,n,i){return new t}createDocumentType(e,t,n){const i=new(qr(Xr))(e,t,n);return i.ownerDocument=this,i}createElement(e){const t=new(es(Xr))(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){const t=new(ts(Xr))(e);return t.ownerDocument=this,t}createComment(e){const t=new(ns(Xr))(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new(is(Xr))(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}}}(Xr)){constructor(e){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=new Cs,this.scrollData=null,e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,t,n){return new hs}createDocumentType(e,t,n){const i=new us(e,t,n);return i.ownerDocument=this,i}createElement(e){const t=e.toUpperCase();let n;switch(t){case"AUDIO":case"VIDEO":n=new ps(t);break;case"IFRAME":n=new ys(t,this.mirror);break;case"CANVAS":n=new gs(t);break;case"STYLE":n=new ms(t);break;default:n=new fs(t)}return n.ownerDocument=this,n}createComment(e){const t=new bs(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new ws(e);return t.ownerDocument=this,t}createTextNode(e){const t=new vs(e);return t.ownerDocument=this,t}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const us=qr(Xr);class fs extends(es(Xr)){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class ps extends(function(e){return class extends e{attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}(fs)){}class gs extends fs{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class ms extends fs{constructor(){super(...arguments),this.rules=[]}}class ys extends fs{constructor(e,t){super(e),this.contentDocument=new hs,this.contentDocument.mirror=t}}const vs=ts(Xr),bs=ns(Xr),ws=is(Xr);function _s(e,t,n,i){let r;switch(e.nodeType){case ss.DOCUMENT_NODE:i&&"IFRAME"===i.nodeName?r=i.contentDocument:(r=t,r.compatMode=e.compatMode);break;case ss.DOCUMENT_TYPE_NODE:{const n=e;r=t.createDocumentType(n.name,n.publicId,n.systemId);break}case ss.ELEMENT_NODE:{const n=e,i=(s=n)instanceof HTMLFormElement?"FORM":s.tagName.toUpperCase();r=t.createElement(i);const o=r;for(const{name:e,value:t}of Array.from(n.attributes))o.attributes[e]=t;n.scrollLeft&&(o.scrollLeft=n.scrollLeft),n.scrollTop&&(o.scrollTop=n.scrollTop);break}case ss.TEXT_NODE:r=t.createTextNode(e.textContent||"");break;case ss.CDATA_SECTION_NODE:r=t.createCDATASection(e.data);break;case ss.COMMENT_NODE:r=t.createComment(e.textContent||"");break;case ss.DOCUMENT_FRAGMENT_NODE:r=i.attachShadow({mode:"open"});break;default:return null}var s;let o=n.getMeta(e);return t instanceof hs&&(o||(o=Is(r,t.unserializedId),n.add(e,o)),t.mirror.add(r,Object.assign({},o))),r}class Cs{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return-1;const n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Is(e,t){switch(e.RRNodeType){case Wr.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case Wr.DocumentType:{const n=e;return{id:t,type:e.RRNodeType,name:n.name,publicId:n.publicId,systemId:n.systemId}}case Wr.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case Wr.Text:case Wr.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case Wr.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}var As=Uint8Array,Es=Uint16Array,Ns=Uint32Array,ks=new As([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ss=new As([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xs=new As([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ts=function(e,t){for(var n=new Es(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new Ns(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},Ds=Ts(ks,2),Rs=Ds[0],Ms=Ds[1];Rs[28]=258,Ms[258]=28;for(var Fs=Ts(Ss,0)[0],Os=new Es(32768),Bs=0;Bs<32768;++Bs){var zs=(43690&Bs)>>>1|(21845&Bs)<<1;zs=(61680&(zs=(52428&zs)>>>2|(13107&zs)<<2))>>>4|(3855&zs)<<4,Os[Bs]=((65280&zs)>>>8|(255&zs)<<8)>>>1}var Us=function(e,t,n){for(var i=e.length,r=0,s=new Es(t);r<i;++r)++s[e[r]-1];var o,a=new Es(t);for(r=0;r<t;++r)a[r]=a[r-1]+s[r-1]<<1;if(n){o=new Es(1<<t);var l=15-t;for(r=0;r<i;++r)if(e[r])for(var c=r<<4|e[r],d=t-e[r],h=a[e[r]-1]++<<d,u=h|(1<<d)-1;h<=u;++h)o[Os[h]>>>l]=c}else for(o=new Es(i),r=0;r<i;++r)o[r]=Os[a[e[r]-1]++]>>>15-e[r];return o},Zs=new As(288);for(Bs=0;Bs<144;++Bs)Zs[Bs]=8;for(Bs=144;Bs<256;++Bs)Zs[Bs]=9;for(Bs=256;Bs<280;++Bs)Zs[Bs]=7;for(Bs=280;Bs<288;++Bs)Zs[Bs]=8;var Ls=new As(32);for(Bs=0;Bs<32;++Bs)Ls[Bs]=5;var Vs=Us(Zs,9,1),Gs=Us(Ls,5,1),Ws=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},$s=function(e,t,n){var i=t/8>>0;return(e[i]|e[i+1]<<8)>>>(7&t)&n},Ks=function(e,t){var n=t/8>>0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(7&t)},Ps=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var i=new(e instanceof Es?Es:e instanceof Ns?Ns:As)(n-t);return i.set(e.subarray(t,n)),i};const Ys=e=>{if("string"!=typeof e)return e;try{const t=JSON.parse(e);if(t.timestamp)return t}catch(t){}try{const t=JSON.parse(function(e,t){var n="";if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var i=0;i<e.length;){var r=e[i++];r<128?n+=String.fromCharCode(r):r<224?n+=String.fromCharCode((31&r)<<6|63&e[i++]):r<240?n+=String.fromCharCode((15&r)<<12|(63&e[i++])<<6|63&e[i++]):(r=((15&r)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536,n+=String.fromCharCode(55296|r>>10,56320|1023&r))}return n}(function(e,t){return function(e,t,n){var i=e.length,r=!t||n,s=!n||n.i;n||(n={}),t||(t=new As(3*i));var o,a=function(e){var n=t.length;if(e>n){var i=new As(Math.max(2*n,e));i.set(t),t=i}},l=n.f||0,c=n.p||0,d=n.b||0,h=n.l,u=n.d,f=n.m,p=n.n,g=8*i;do{if(!h){n.f=l=$s(e,c,1);var m=$s(e,c+1,3);if(c+=3,!m){var y=e[(S=((o=c)/8>>0)+(7&o&&1)+4)-4]|e[S-3]<<8,v=S+y;if(v>i){if(s)throw"unexpected EOF";break}r&&a(d+y),t.set(e.subarray(S,v),d),n.b=d+=y,n.p=c=8*v;continue}if(1==m)h=Vs,u=Gs,f=9,p=5;else{if(2!=m)throw"invalid block type";var b=$s(e,c,31)+257,w=$s(e,c+10,15)+4,_=b+$s(e,c+5,31)+1;c+=14;for(var C=new As(_),I=new As(19),A=0;A<w;++A)I[xs[A]]=$s(e,c+3*A,7);c+=3*w;var E=Ws(I),N=(1<<E)-1;if(!s&&c+_*(E+7)>g)break;var k=Us(I,E,1);for(A=0;A<_;){var S,x=k[$s(e,c,N)];if(c+=15&x,(S=x>>>4)<16)C[A++]=S;else{var T=0,D=0;for(16==S?(D=3+$s(e,c,3),c+=2,T=C[A-1]):17==S?(D=3+$s(e,c,7),c+=3):18==S&&(D=11+$s(e,c,127),c+=7);D--;)C[A++]=T}}var R=C.subarray(0,b),M=C.subarray(b);f=Ws(R),p=Ws(M),h=Us(R,f,1),u=Us(M,p,1)}if(c>g)throw"unexpected EOF"}r&&a(d+131072);for(var F=(1<<f)-1,O=(1<<p)-1,B=f+p+18;s||c+B<g;){var z=(T=h[Ks(e,c)&F])>>>4;if((c+=15&T)>g)throw"unexpected EOF";if(!T)throw"invalid length/literal";if(z<256)t[d++]=z;else{if(256==z){h=null;break}var U=z-254;if(z>264){var Z=ks[A=z-257];U=$s(e,c,(1<<Z)-1)+Rs[A],c+=Z}var L=u[Ks(e,c)&O],V=L>>>4;if(!L)throw"invalid distance";if(c+=15&L,M=Fs[V],V>3&&(Z=Ss[V],M+=Ks(e,c)&(1<<Z)-1,c+=Z),c>g)throw"unexpected EOF";r&&a(d+131072);for(var G=d+U;d<G;d+=4)t[d]=t[d-M],t[d+1]=t[d+1-M],t[d+2]=t[d+2-M],t[d+3]=t[d+3-M];d=G}}n.l=h,n.p=c,n.b=d,h&&(l=1,n.m=f,n.d=u,n.n=p)}while(!l);return d==t.length?t:Ps(t,0,d)}((function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}(function(e,t){var n=e.length;for(var i=new As(e.length+(e.length>>>1)),r=0,s=function(e){i[r++]=e},o=0;o<n;++o){if(r+5>i.length){var a=new As(r+8+(n-o<<1));a.set(i),i=a}var l=e.charCodeAt(o);s(l)}return Ps(i,0,r)}(e))));if("v1"===t.v)return t;throw new Error(`These events were packed with packer ${t.v} which is incompatible with current packer v1.`)}catch(t){throw console.error(t),new Error("Unknown data format.")}};function Hs(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map((function(e){e(n)})),(i=e.get("*"))&&i.slice().map((function(e){e(t,n)}))}}}var js,Qs=Object.freeze({__proto__:null,default:Hs});function Js(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&!0!==e.__forceSmoothScrollPolyfill__)return;const n=e.HTMLElement||e.Element,i={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||a,scrollIntoView:n.prototype.scrollIntoView},r=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,s=(o=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(o)?1:0);var o;function a(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,t){return"Y"===t?e.clientHeight+s<e.scrollHeight:"X"===t?e.clientWidth+s<e.scrollWidth:void 0}function d(t,n){const i=e.getComputedStyle(t,null)["overflow"+n];return"auto"===i||"scroll"===i}function h(e){const t=c(e,"Y")&&d(e,"Y"),n=c(e,"X")&&d(e,"X");return t||n}function u(t){let n,i,s,o=(r()-t.startTime)/468;var a;o=o>1?1:o,a=o,n=.5*(1-Math.cos(Math.PI*a)),i=t.startX+(t.x-t.startX)*n,s=t.startY+(t.y-t.startY)*n,t.method.call(t.scrollable,i,s),i===t.x&&s===t.y||e.requestAnimationFrame(u.bind(e,t))}function f(n,s,o){let l,c,d,h;const f=r();n===t.body?(l=e,c=e.scrollX||e.pageXOffset,d=e.scrollY||e.pageYOffset,h=i.scroll):(l=n,c=n.scrollLeft,d=n.scrollTop,h=a),u({scrollable:l,method:h,startTime:f,startX:c,startY:d,x:s,y:o})}e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?f.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):i.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?i.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):f.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(void 0===arguments[0])return;if(!0===l(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}const e=arguments[0].left,t=arguments[0].top;f.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)},n.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(!0===l(arguments[0]))return void i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);const n=function(e){for(;e!==t.body&&!1===h(e);)e=e.parentNode||e.host;return e}(this),r=n.getBoundingClientRect(),s=this.getBoundingClientRect();n!==t.body?(f.call(this,n,n.scrollLeft+s.left-r.left,n.scrollTop+s.top-r.top),"fixed"!==e.getComputedStyle(n).position&&e.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):e.scrollBy({left:s.left,top:s.top,behavior:"smooth"})}}class Xs{constructor(e=[],t){this.timeOffset=0,this.raf=null,this.actions=e,this.speed=t.speed,this.liveMode=t.liveMode}addAction(e){if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)return void this.actions.push(e);const t=this.findActionIndex(e);this.actions.splice(t,0,e)}start(){this.timeOffset=0;let e=performance.now();const t=()=>{const n=performance.now();for(this.timeOffset+=(n-e)*this.speed,e=n;this.actions.length;){const e=this.actions[0];if(!(this.timeOffset>=e.delay))break;this.actions.shift(),e.doAction()}(this.actions.length>0||this.liveMode)&&(this.raf=requestAnimationFrame(t))};this.raf=requestAnimationFrame(t)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}toggleLiveMode(e){this.liveMode=e}isActive(){return null!==this.raf}findActionIndex(e){let t=0,n=this.actions.length-1;for(;t<=n;){const i=Math.floor((t+n)/2);if(this.actions[i].delay<e.delay)t=i+1;else{if(!(this.actions[i].delay>e.delay))return i+1;n=i-1}}return t}}function qs(e,t){if(e.type===Fr.IncrementalSnapshot&&e.data.source===Or.MouseMove&&e.data.positions&&e.data.positions.length){const n=e.data.positions[0].timeOffset,i=e.timestamp+n;return e.delay=i-t,i-t}return e.delay=e.timestamp-t,e.delay}function eo(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(js||(js={}));var to={type:"xstate.init"};function no(e){return void 0===e?[]:[].concat(e)}function io(e){return{type:"xstate.assign",assignment:e}}function ro(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function so(e){return function(t){return e===t}}function oo(e){return"string"==typeof e?{type:e}:e}function ao(e,t){return{value:e,context:t,actions:[],changed:!1,matches:so(e)}}function lo(e,t,n){var i=t,r=!1;return[e.filter((function(e){if("xstate.assign"===e.type){r=!0;var t=Object.assign({},i);return"function"==typeof e.assignment?t=e.assignment(i,n):Object.keys(e.assignment).forEach((function(r){t[r]="function"==typeof e.assignment[r]?e.assignment[r](i,n):e.assignment[r]})),i=t,!1}return!0})),i,r]}function co(e,t){void 0===t&&(t={});var n=eo(lo(no(e.states[e.initial].entry).map((function(e){return ro(e,t.actions)})),e.context,to),2),i=n[0],r=n[1],s={config:e,_options:t,initialState:{value:e.initial,actions:i,context:r,matches:so(e.initial)},transition:function(t,n){var i,r,o="string"==typeof t?{value:t,context:e.context}:t,a=o.value,l=o.context,c=oo(n),d=e.states[a];if(d.on){var h=no(d.on[c.type]);try{for(var u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(h),f=u.next();!f.done;f=u.next()){var p=f.value;if(void 0===p)return ao(a,l);var g="string"==typeof p?{target:p}:p,m=g.target,y=g.actions,v=void 0===y?[]:y,b=g.cond,w=void 0===b?function(){return!0}:b,_=void 0===m,C=null!=m?m:a,I=e.states[C];if(w(l,c)){var A=eo(lo((_?no(v):[].concat(d.exit,v,I.entry).filter((function(e){return e}))).map((function(e){return ro(e,s._options.actions)})),l,c),3),E=A[0],N=A[1],k=A[2],S=null!=m?m:a;return{value:S,context:N,actions:E,changed:m!==a||E.length>0||k,matches:so(S)}}}}catch(x){i={error:x}}finally{try{f&&!f.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}}return ao(a,l)}};return s}var ho=function(e,t){return e.actions.forEach((function(n){var i=n.exec;return i&&i(e.context,t)}))};function uo(e){var t=e.initialState,n=js.NotStarted,i=new Set,r={_machine:e,send:function(r){n===js.Running&&(t=e.transition(t,r),ho(t,oo(r)),i.forEach((function(e){return e(t)})))},subscribe:function(e){return i.add(e),e(t),{unsubscribe:function(){return i.delete(e)}}},start:function(i){if(i){var s="object"==typeof i?i:{context:e.config.context,value:i};t={value:s.value,actions:[],context:s.context,matches:so(s.value)}}return n=js.Running,ho(t,to),r},stop:function(){return n=js.Stopped,i.clear(),r},get state(){return t},get status(){return n}};return r}const fo=new Map;function po(e,t){let n=fo.get(e);return n||(n=new Map,fo.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}function go(e,t,n){return i=>Zr(this,void 0,void 0,(function*(){if(i&&"object"==typeof i&&"rr_type"in i){if(n&&(n.isUnchanged=!1),"ImageBitmap"===i.rr_type&&"args"in i){const r=yield go(e,t,n)(i.args);return yield createImageBitmap.apply(null,r)}if("index"in i){if(n||null===t)return i;const{rr_type:e,index:r}=i;return po(t,e)[r]}if("args"in i){const{rr_type:r,args:s}=i;return new window[r](...yield Promise.all(s.map(go(e,t,n))))}if("base64"in i)return function(e){var t,n,i,r,s,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),d=new Uint8Array(c);for(t=0;t<a;t+=4)n=Vr[e.charCodeAt(t)],i=Vr[e.charCodeAt(t+1)],r=Vr[e.charCodeAt(t+2)],s=Vr[e.charCodeAt(t+3)],d[l++]=n<<2|i>>4,d[l++]=(15&i)<<4|r>>2,d[l++]=(3&r)<<6|63&s;return c}(i.base64);if("src"in i){const t=e.get(i.src);if(t)return t;{const t=new Image;return t.src=i.src,e.set(i.src,t),t}}if("data"in i&&"Blob"===i.rr_type){const r=yield Promise.all(i.data.map(go(e,t,n)));return new Blob(r,{type:i.type})}}else if(Array.isArray(i))return yield Promise.all(i.map(go(e,t,n)));return i}))}const mo=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function yo({mutation:e,target:t,type:n,imageMap:i,errorHandler:r}){return Zr(this,void 0,void 0,(function*(){try{const r=function(e,t){try{return t===zr.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch(n){return null}}(t,n);if(!r)return;if(e.setter)return void(r[e.property]=e.args[0]);const s=r[e.property],o=yield Promise.all(e.args.map(go(i,r)));!function(e,t){if(!(null==t?void 0:t.constructor))return;const{name:n}=t.constructor;if(!mo.includes(n))return;const i=po(e,n);i.includes(t)||i.push(t)}(r,s.apply(r,o))}catch(s){r(e,s)}}))}function vo({event:e,mutation:t,target:n,imageMap:i,errorHandler:r}){return Zr(this,void 0,void 0,(function*(){try{const r=n.getContext("2d");if(t.setter)return void(r[t.property]=t.args[0]);const s=r[t.property];if("drawImage"===t.property&&"string"==typeof t.args[0])i.get(e),s.apply(r,t.args);else{const e=yield Promise.all(t.args.map(go(i,r)));s.apply(r,e)}}catch(s){r(t,s)}}))}function bo({event:e,mutation:t,target:n,imageMap:i,canvasEventMap:r,errorHandler:s}){return Zr(this,void 0,void 0,(function*(){try{const o=r.get(e)||t,a="commands"in o?o.commands:[o];if([zr.WebGL,zr.WebGL2].includes(t.type)){for(let e=0;e<a.length;e++){const r=a[e];yield yo({mutation:r,type:t.type,target:n,imageMap:i,errorHandler:s})}return}for(let t=0;t<a.length;t++){const r=a[t];yield vo({event:e,mutation:r,target:n,imageMap:i,errorHandler:s})}}catch(o){s(t,o)}}))}const wo=Hs||Qs,_o={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Co(e){return e.type==Fr.IncrementalSnapshot&&(e.data.source==Or.TouchMove||e.data.source==Or.MouseInteraction&&e.data.type==Br.TouchStart)}class Io{constructor(e,t){if(this.usingVirtualDom=!1,this.virtualDom=new hs,this.mouseTail=null,this.tailPositions=[],this.emitter=wo(),this.legacy_missingNodeRetryMap={},this.cache=Cr(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=new fr,this.styleMirror=new Mr,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=e=>{this.iframe.style.display="inherit";for(const t of[this.mouseTail,this.iframe])t&&(t.setAttribute("width",String(e.width)),t.setAttribute("height",String(e.height)))},this.applyEventsSynchronously=e=>{for(const t of e){switch(t.type){case Fr.DomContentLoaded:case Fr.Load:case Fr.Custom:continue;case Fr.FullSnapshot:case Fr.Meta:case Fr.Plugin:case Fr.IncrementalSnapshot:}this.getCastFn(t,!0)()}!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null},this.getCastFn=(e,t=!1)=>{let n;switch(e.type){case Fr.DomContentLoaded:case Fr.Load:break;case Fr.Custom:n=()=>{this.emitter.emit(Ur.CustomEvent,e)};break;case Fr.Meta:n=()=>this.emitter.emit(Ur.Resize,{width:e.data.width,height:e.data.height});break;case Fr.FullSnapshot:n=()=>{var n;if(this.firstFullSnapshot){if(this.firstFullSnapshot===e)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(e,t),null===(n=this.iframe.contentWindow)||void 0===n||n.scrollTo(e.data.initialOffset),this.styleMirror.reset()};break;case Fr.IncrementalSnapshot:n=()=>{if(this.applyIncremental(e,t),!t&&(e===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const t of this.service.state.context.events)if(!(t.timestamp<=e.timestamp)&&this.isUserInteraction(t)){t.delay-e.delay>1e4*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=t);break}if(this.nextUserInteractionEvent){const t=this.nextUserInteractionEvent.delay-e.delay,n={speed:Math.min(Math.round(t/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:n}),this.emitter.emit(Ur.SkipStart,n)}}}}return()=>{n&&n();for(const n of this.config.plugins||[])n.handler&&n.handler(e,t,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:e}});const i=this.service.state.context.events.length-1;if(e===this.service.state.context.events[i]){const t=()=>{i<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(Ur.Finish))};e.type===Fr.IncrementalSnapshot&&e.data.source===Or.MouseMove&&e.data.positions.length?setTimeout((()=>{t()}),Math.max(0,50-e.data.positions[0].timeOffset)):t()}this.emitter.emit(Ur.EventCast,e)}},!(null==t?void 0:t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const n={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:_o,useVirtualDom:!0};this.config=Object.assign({},n,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(Ur.Resize,this.handleResize),this.setupDom();for(const o of this.config.plugins||[])o.getMirror&&o.getMirror({nodeMirror:this.mirror});this.emitter.on(Ur.Flush,(()=>{if(this.usingVirtualDom){const t={mirror:this.mirror,applyCanvas:(e,t,n)=>{bo({event:e,mutation:t,target:n,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(e,t)=>{e.source===Or.StyleSheetRule?this.applyStyleSheetRule(e,t):e.source===Or.StyleDeclaration&&this.applyStyleDeclaration(e,t)}};if(this.iframe.contentDocument&&ls(this.iframe.contentDocument,this.virtualDom,t,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const n in this.legacy_missingNodeRetryMap)try{const e=this.legacy_missingNodeRetryMap[n],i=ds(e.node,this.mirror,this.virtualDom.mirror);ls(i,e.node,t,this.virtualDom.mirror),e.node=i}catch(e){this.config.showWarning&&console.warn(e)}this.constructedStyleMutations.forEach((e=>{this.applyStyleSheetMutation(e)})),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach((e=>{this.applyAdoptedStyleSheet(e)})),this.adoptedStyleSheets=[]}this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)})),this.emitter.on(Ur.PlayBack,(()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()}));const i=new Xs([],{speed:this.config.speed,liveMode:this.config.liveMode});this.service=function(e,{getCastFn:t,applyEventsSynchronously:n,emitter:i}){return uo(co({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:io({lastPlayedEvent:(e,t)=>"CAST_EVENT"===t.type?t.payload.event:e.lastPlayedEvent}),recordTimeOffset:io(((e,t)=>{let n=e.timeOffset;return"payload"in t&&"timeOffset"in t.payload&&(n=t.payload.timeOffset),Object.assign(Object.assign({},e),{timeOffset:n,baselineTime:e.events[0].timestamp+n})})),play(e){var r;const{timer:s,events:o,baselineTime:a,lastPlayedEvent:l}=e;s.clear();for(const t of o)qs(t,a);const c=function(e,t){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.type===Fr.Meta&&i.timestamp<=t)return e.slice(n)}return e}(o,a);let d=null==l?void 0:l.timestamp;(null==l?void 0:l.type)===Fr.IncrementalSnapshot&&l.data.source===Or.MouseMove&&(d=l.timestamp+(null===(r=l.data.positions[0])||void 0===r?void 0:r.timeOffset)),a<(d||0)&&i.emit(Ur.PlayBack);const h=new Array;for(const n of c)if(!(d&&d<a&&(n.timestamp<=d||n===l)))if(n.timestamp<a)h.push(n);else{const e=t(n,!1);s.addAction({doAction:()=>{e()},delay:n.delay})}n(h),i.emit(Ur.Flush),s.start()},pause(e){e.timer.clear()},resetLastPlayedEvent:io((e=>Object.assign(Object.assign({},e),{lastPlayedEvent:null}))),startLive:io({baselineTime:(e,t)=>(e.timer.toggleLiveMode(!0),e.timer.start(),"TO_LIVE"===t.type&&t.payload.baselineTime?t.payload.baselineTime:Date.now())}),addEvent:io(((e,n)=>{const{baselineTime:i,timer:r,events:s}=e;if("ADD_EVENT"===n.type){const{event:e}=n.payload;qs(e,i);let o=s.length-1;if(!s[o]||s[o].timestamp<=e.timestamp)s.push(e);else{let t=-1,n=0;for(;n<=o;){const t=Math.floor((n+o)/2);s[t].timestamp<=e.timestamp?n=t+1:o=t-1}-1===t&&(t=n),s.splice(t,0,e)}const a=e.timestamp<i,l=t(e,a);a?l():r.isActive()&&r.addAction({doAction:()=>{l()},delay:e.delay})}return Object.assign(Object.assign({},e),{events:s})}))}}))}({events:e.map((e=>t&&t.unpackFn?t.unpackFn(e):e)).sort(((e,t)=>e.timestamp-t.timestamp)),timer:i,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe((e=>{this.emitter.emit(Ur.StateChange,{player:e})})),this.speedService=uo(co({id:"speed",context:{normalSpeed:-1,timer:i},initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(e,t)=>{"payload"in t&&e.timer.setSpeed(t.payload.speed)},recordSpeed:io({normalSpeed:e=>e.timer.speed}),restoreSpeed:e=>{e.timer.setSpeed(e.normalSpeed)}}})),this.speedService.start(),this.speedService.subscribe((e=>{this.emitter.emit(Ur.StateChange,{speed:e})}));const r=this.service.state.context.events.find((e=>e.type===Fr.Meta)),s=this.service.state.context.events.find((e=>e.type===Fr.FullSnapshot));if(r){const{width:e,height:t}=r.data;setTimeout((()=>{this.emitter.emit(Ur.Resize,{width:e,height:t})}),0)}s&&setTimeout((()=>{var e;this.firstFullSnapshot||(this.firstFullSnapshot=s,this.rebuildFullSnapshot(s),null===(e=this.iframe.contentWindow)||void 0===e||e.scrollTo(s.data.initialOffset))}),1),this.service.state.context.events.find(Co)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach((t=>{e[t],this.config[t]=e[t]})),this.config.skipInactive||this.backToNormal(),void 0!==e.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),void 0!==e.mouseTail&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,n;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}}),null===(n=null===(t=this.iframe.contentDocument)||void 0===t?void 0:t.getElementsByTagName("html")[0])||void 0===n||n.classList.remove("rrweb-paused"),this.emitter.emit(Ur.Start)}pause(e){var t,n;void 0===e&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof e&&(this.play(e),this.service.send({type:"PAUSE"})),null===(n=null===(t=this.iframe.contentDocument)||void 0===t?void 0:t.getElementsByTagName("html")[0])||void 0===n||n.classList.add("rrweb-paused"),this.emitter.emit(Ur.Pause)}resume(e=0){console.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(Ur.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(Ur.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const t=this.config.unpackFn?this.config.unpackFn(e):e;Co(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then((()=>this.service.send({type:"ADD_EVENT",payload:{event:t}})))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=Cr()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(Js(this.iframe.contentWindow,this.iframe.contentDocument),function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const n=[],i=(e,t)=>{this.collectIframeAndAttachDocument(n,e);for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(e,{id:t,replayer:this})};(function(e,t){var n=t.doc,i=t.onVisit,r=t.hackCss,s=void 0===r||r,o=t.afterAppend,a=t.cache,l=t.mirror,c=void 0===l?new fr:l,d=Ir(e,{doc:n,mirror:c,skipChild:!1,hackCss:s,afterAppend:o,cache:a});(function(e,t){for(var n=0,i=e.getIds();n<i.length;n++){var r=i[n];e.has(r)&&t(e.getNode(r))}})(c,(function(e){i&&i(e),function(e,t){var n=t.getMeta(e);if((null==n?void 0:n.type)===dr.Element){var i=e;for(var r in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,r)&&r.startsWith("rr_")){var s=n.attributes[r];"rr_scrollLeft"===r&&(i.scrollLeft=s),"rr_scrollTop"===r&&(i.scrollTop=s)}}}(e,c)}))})(e.data.node,{doc:this.iframe.contentDocument,afterAppend:i,cache:this.cache,mirror:this.mirror}),i(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:o,builtNode:a}of n)this.attachDocumentToIframe(o,a),this.newDocumentQueue=this.newDocumentQueue.filter((e=>e!==o));const{documentElement:r,head:s}=this.iframe.contentDocument;this.insertStyleRules(r,s),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(Ur.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var n;const i=(r=this.config.blockClass,[`.${r} { background: currentColor }`,"noscript { display: none !important; }"]).concat(this.config.insertStyleRules);var r;if(this.config.pauseAnimation&&i.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const n=this.virtualDom.createElement("style");this.virtualDom.mirror.add(n,Is(n,this.virtualDom.unserializedId)),e.insertBefore(n,t),n.rules.push({source:Or.StyleSheetRule,adds:i.map(((e,t)=>({rule:e,index:t})))})}else{const r=document.createElement("style");e.insertBefore(r,t);for(let e=0;e<i.length;e++)null===(n=r.sheet)||void 0===n||n.insertRule(i[e],e)}}attachDocumentToIframe(e,t){const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,i=[],r=(e,r)=>{this.collectIframeAndAttachDocument(i,e);const s=n.getMeta(e);if((null==s?void 0:s.type)===dr.Element&&"HTML"===(null==s?void 0:s.tagName.toUpperCase())){const{documentElement:e,head:n}=t.contentDocument;this.insertStyleRules(e,n)}for(const t of this.config.plugins||[])t.onBuild&&t.onBuild(e,{id:r,replayer:this})};Ir(e.node,{doc:t.contentDocument,mirror:n,hackCss:!0,skipChild:!1,afterAppend:r,cache:this.cache}),r(t.contentDocument,e.node.id);for(const{mutationInQueue:s,builtNode:o}of i)this.attachDocumentToIframe(s,o),this.newDocumentQueue=this.newDocumentQueue.filter((e=>e!==s))}collectIframeAndAttachDocument(e,t){if(Sr(t,this.mirror)){const n=this.newDocumentQueue.find((e=>e.parentId===this.mirror.getId(t)));n&&e.push({mutationInQueue:n,builtNode:t})}}waitForStylesheetLoad(){var e;const t=null===(e=this.iframe.contentDocument)||void 0===e?void 0:e.head;if(t){const e=new Set;let n,i=this.service.state;const r=()=>{i=this.service.state};this.emitter.on(Ur.Start,r),this.emitter.on(Ur.Pause,r);const s=()=>{this.emitter.off(Ur.Start,r),this.emitter.off(Ur.Pause,r)};t.querySelectorAll('link[rel="stylesheet"]').forEach((t=>{t.sheet||(e.add(t),t.addEventListener("load",(()=>{e.delete(t),0===e.size&&-1!==n&&(i.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(Ur.LoadStylesheetEnd),n&&clearTimeout(n),s())})))})),e.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(Ur.LoadStylesheetStart),n=setTimeout((()=>{i.matches("playing")&&this.play(this.getCurrentTime()),n=-1,s()}),this.config.loadTimeout))}}preloadAllImages(){return Zr(this,void 0,void 0,(function*(){this.service.state;const e=()=>{this.service.state};this.emitter.on(Ur.Start,e),this.emitter.on(Ur.Pause,e);const t=[];for(const n of this.service.state.context.events)n.type===Fr.IncrementalSnapshot&&n.data.source===Or.CanvasMutation&&(t.push(this.deserializeAndPreloadCanvasEvents(n.data,n)),("commands"in n.data?n.data.commands:[n.data]).forEach((e=>{this.preloadImages(e,n)})));return Promise.all(t)}))}preloadImages(e,t){if("drawImage"===e.property&&"string"==typeof e.args[0]&&!this.imageMap.has(t)){const t=document.createElement("canvas"),n=t.getContext("2d"),i=null==n?void 0:n.createImageData(t.width,t.height);null==i||i.data,JSON.parse(e.args[0]),null==n||n.putImageData(i,0,0)}}deserializeAndPreloadCanvasEvents(e,t){return Zr(this,void 0,void 0,(function*(){if(!this.canvasEventMap.has(t)){const n={isUnchanged:!0};if("commands"in e){const i=yield Promise.all(e.commands.map((e=>Zr(this,void 0,void 0,(function*(){const t=yield Promise.all(e.args.map(go(this.imageMap,null,n)));return Object.assign(Object.assign({},e),{args:t})})))));!1===n.isUnchanged&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{commands:i}))}else{const i=yield Promise.all(e.args.map(go(this.imageMap,null,n)));!1===n.isUnchanged&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{args:i}))}}}))}applyIncremental(e,t){var n,i,r;const{data:s}=e;switch(s.source){case Or.Mutation:try{this.applyMutation(s,t)}catch(o){this.warn(`Exception in mutation ${o.message||o}`,s)}break;case Or.Drag:case Or.TouchMove:case Or.MouseMove:if(t){const e=s.positions[s.positions.length-1];this.mousePos={x:e.x,y:e.y,id:e.id,debugData:s}}else s.positions.forEach((n=>{const i={doAction:()=>{this.moveAndHover(n.x,n.y,n.id,t,s)},delay:n.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(i)})),this.timer.addAction({doAction(){},delay:e.delay-(null===(n=s.positions[0])||void 0===n?void 0:n.timeOffset)});break;case Or.MouseInteraction:{if(-1===s.id||t)break;const e=new Event(Br[s.type].toLowerCase()),n=this.mirror.getNode(s.id);if(!n)return this.debugNodeNotFound(s,s.id);this.emitter.emit(Ur.MouseInteraction,{type:s.type,target:n});const{triggerFocus:i}=this.config;switch(s.type){case Br.Blur:"blur"in n&&n.blur();break;case Br.Focus:i&&n.focus&&n.focus({preventScroll:!0});break;case Br.Click:case Br.TouchStart:case Br.TouchEnd:t?(s.type===Br.TouchStart?this.touchActive=!0:s.type===Br.TouchEnd&&(this.touchActive=!1),this.mousePos={x:s.x,y:s.y,id:s.id,debugData:s}):(s.type===Br.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(s.x,s.y,s.id,t,s),s.type===Br.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):s.type===Br.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):s.type===Br.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case Br.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:n.dispatchEvent(e)}break}case Or.Scroll:if(-1===s.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(s.id);if(!e)return this.debugNodeNotFound(s,s.id);e.scrollData=s;break}this.applyScroll(s,t);break;case Or.ViewportResize:this.emitter.emit(Ur.Resize,{width:s.width,height:s.height});break;case Or.Input:if(-1===s.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(s.id);if(!e)return this.debugNodeNotFound(s,s.id);e.inputData=s;break}this.applyInput(s);break;case Or.MediaInteraction:{const e=this.usingVirtualDom?this.virtualDom.mirror.getNode(s.id):this.mirror.getNode(s.id);if(!e)return this.debugNodeNotFound(s,s.id);const t=e;try{s.currentTime&&(t.currentTime=s.currentTime),s.volume&&(t.volume=s.volume),s.muted&&(t.muted=s.muted),1===s.type&&t.pause(),0===s.type&&t.play(),4===s.type&&(t.playbackRate=s.playbackRate)}catch(a){this.config.showWarning&&console.warn(`Failed to replay media interactions: ${a.message||a}`)}break}case Or.StyleSheetRule:case Or.StyleDeclaration:this.usingVirtualDom?s.styleId?this.constructedStyleMutations.push(s):s.id&&(null===(i=this.virtualDom.mirror.getNode(s.id))||void 0===i||i.rules.push(s)):this.applyStyleSheetMutation(s);break;case Or.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const t=this.virtualDom.mirror.getNode(s.id);if(!t)return this.debugNodeNotFound(s,s.id);t.canvasMutations.push({event:e,mutation:s})}else{const t=this.mirror.getNode(s.id);if(!t)return this.debugNodeNotFound(s,s.id);bo({event:e,mutation:s,target:t,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case Or.Font:try{const e=new FontFace(s.family,s.buffer?new Uint8Array(JSON.parse(s.fontSource)):s.fontSource,s.descriptors);null===(r=this.iframe.contentDocument)||void 0===r||r.fonts.add(e)}catch(o){this.config.showWarning&&console.warn(o)}break;case Or.Selection:if(t){this.lastSelectionData=s;break}this.applySelection(s);break;case Or.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(s):this.applyAdoptedStyleSheet(s)}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,function(e,t=function(){return new Kr}(),n=new hs){(function e(i,r){const s=_s(i,n,t,r);if(null!==s)if("IFRAME"!==(null==r?void 0:r.nodeName)&&i.nodeType!==ss.DOCUMENT_FRAGMENT_NODE&&(null==r||r.appendChild(s),s.parentNode=r,s.parentElement=r),"IFRAME"===i.nodeName){const t=i.contentDocument;t&&e(t,s)}else i.nodeType!==ss.DOCUMENT_NODE&&i.nodeType!==ss.ELEMENT_NODE&&i.nodeType!==ss.DOCUMENT_FRAGMENT_NODE||(i.nodeType===ss.ELEMENT_NODE&&i.shadowRoot&&e(i.shadowRoot,s),i.childNodes.forEach((t=>e(t,s))))})(e,null)}(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const l in this.legacy_missingNodeRetryMap)try{const e=this.legacy_missingNodeRetryMap[l],t=_s(e.node,this.virtualDom,this.mirror);t&&(e.node=t)}catch(a){this.config.showWarning&&console.warn(a)}const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes.forEach((t=>{var i;const r=n.getNode(t.id);if(!r){if(e.removes.find((e=>e.id===t.parentId)))return;return this.warnNodeNotFound(e,t.id)}let s=n.getNode(t.parentId);if(!s)return this.warnNodeNotFound(e,t.parentId);if(t.isShadow&&Tr(s)&&(s=s.shadowRoot),n.removeNodeFromMap(r),s)try{s.removeChild(r),this.usingVirtualDom&&"#text"===r.nodeName&&"STYLE"===s.nodeName&&(null===(i=s.rules)||void 0===i?void 0:i.length)>0&&(s.rules=[])}catch(o){if(!(o instanceof DOMException))throw o;this.warn("parent could not remove child in mutation",s,r,e)}}));const i=Object.assign({},this.legacy_missingNodeRetryMap),r=[],s=e=>{var t;if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let s=n.getNode(e.parentId);if(!s)return e.node.type===dr.Document?this.newDocumentQueue.push(e):r.push(e);e.node.isShadow&&(Tr(s)||s.attachShadow({mode:"open"}),s=s.shadowRoot);let o=null,a=null;if(e.previousId&&(o=n.getNode(e.previousId)),e.nextId&&(a=n.getNode(e.nextId)),(e=>{let t=null;return e.nextId&&(t=n.getNode(e.nextId)),null!==e.nextId&&void 0!==e.nextId&&-1!==e.nextId&&!t})(e))return r.push(e);if(e.node.rootId&&!n.getNode(e.node.rootId))return;const l=e.node.rootId?n.getNode(e.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Sr(s,n))return void this.attachDocumentToIframe(e,s);const c=(e,t)=>{for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(e,{id:t,replayer:this})},d=Ir(e.node,{doc:l,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:c});if(-1===e.previousId||-1===e.nextId)return void(i[e.node.id]={node:d,mutation:e});const h=n.getMeta(s);if(h&&h.type===dr.Element&&"textarea"===h.tagName&&e.node.type===dr.Text){const e=Array.isArray(s.childNodes)?s.childNodes:Array.from(s.childNodes);for(const t of e)t.nodeType===s.TEXT_NODE&&s.removeChild(t)}if(o&&o.nextSibling&&o.nextSibling.parentNode)s.insertBefore(d,o.nextSibling);else if(a&&a.parentNode)s.contains(a)?s.insertBefore(d,a):s.insertBefore(d,null);else{if(s===l)for(;l.firstChild;)l.removeChild(l.firstChild);s.appendChild(d)}if(c(d,e.node.id),this.usingVirtualDom&&"#text"===d.nodeName&&"STYLE"===s.nodeName&&(null===(t=s.rules)||void 0===t?void 0:t.length)>0&&(s.rules=[]),Sr(d,this.mirror)){const e=this.mirror.getId(d),t=this.newDocumentQueue.find((t=>t.parentId===e));t&&(this.attachDocumentToIframe(t,d),this.newDocumentQueue=this.newDocumentQueue.filter((e=>e!==t)))}(e.previousId||e.nextId)&&this.legacy_resolveMissingNode(i,s,d,e)};e.adds.forEach((e=>{s(e)}));const o=Date.now();for(;r.length;){const e=Nr(r);if(r.length=0,Date.now()-o>500){this.warn("Timeout in the loop, please check the resolve tree data:",e);break}for(const t of e)n.getNode(t.value.parentId)?kr(t,(e=>{s(e)})):this.debug("Drop resolve tree since there is no parent for the root node.",t)}Object.keys(i).length&&Object.assign(this.legacy_missingNodeRetryMap,i),function(e){const t=new Set,n=[];for(let i=e.length;i--;){const r=e[i];t.has(r.id)||(n.push(r),t.add(r.id))}return n}(e.texts).forEach((t=>{var i;const r=n.getNode(t.id);if(!r){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}if(r.textContent=t.value,this.usingVirtualDom){const e=r.parentNode;(null===(i=null==e?void 0:e.rules)||void 0===i?void 0:i.length)>0&&(e.rules=[])}})),e.attributes.forEach((t=>{const i=n.getNode(t.id);if(!i){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}for(const e in t.attributes)if("string"==typeof e){const r=t.attributes[e];if(null===r)i.removeAttribute(e);else if("string"==typeof r)try{if("_cssText"===e&&("LINK"===i.nodeName||"STYLE"===i.nodeName))try{const e=n.getMeta(i);Object.assign(e.attributes,t.attributes);const r=Ir(e,{doc:i.ownerDocument,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache}),s=i.nextSibling,o=i.parentNode;if(r&&o){o.removeChild(i),o.insertBefore(r,s),n.replace(t.id,r);break}}catch(a){}i.setAttribute(e,r)}catch(a){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",a)}else if("style"===e){const e=r,t=i;for(const n in e)if(!1===e[n])t.style.removeProperty(n);else if(e[n]instanceof Array){const i=e[n];t.style.setProperty(n,i[0],i[1])}else{const i=e[n];t.style.setProperty(n,i)}}}}))}applyScroll(e,t){var n,i;const r=this.mirror.getNode(e.id);if(!r)return this.debugNodeNotFound(e,e.id);const s=this.mirror.getMeta(r);if(r===this.iframe.contentDocument)null===(n=this.iframe.contentWindow)||void 0===n||n.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if((null==s?void 0:s.type)===dr.Document)null===(i=r.defaultView)||void 0===i||i.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch(o){}}applyInput(e){const t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch(n){}}applySelection(e){try{const t=new Set,n=e.ranges.map((({start:e,startOffset:n,end:i,endOffset:r})=>{const s=this.mirror.getNode(e),o=this.mirror.getNode(i);if(!s||!o)return;const a=new Range;a.setStart(s,n),a.setEnd(o,r);const l=s.ownerDocument,c=null==l?void 0:l.getSelection();return c&&t.add(c),{range:a,selection:c}}));t.forEach((e=>e.removeAllRanges())),n.forEach((e=>{var t;return e&&(null===(t=e.selection)||void 0===t?void 0:t.addRange(e.range))}))}catch(t){}}applyStyleSheetMutation(e){var t;let n=null;e.styleId?n=this.styleMirror.getStyle(e.styleId):e.id&&(n=(null===(t=this.mirror.getNode(e.id))||void 0===t?void 0:t.sheet)||null),n&&(e.source===Or.StyleSheetRule?this.applyStyleSheetRule(e,n):e.source===Or.StyleDeclaration&&this.applyStyleDeclaration(e,n))}applyStyleSheetRule(e,t){var n,i,r,s;if(null===(n=e.adds)||void 0===n||n.forEach((({rule:e,index:n})=>{try{if(Array.isArray(n)){const{positions:i,index:r}=Rr(n);Dr(t.cssRules,i).insertRule(e,r)}else{const i=void 0===n?void 0:Math.min(n,t.cssRules.length);null==t||t.insertRule(e,i)}}catch(i){}})),null===(i=e.removes)||void 0===i||i.forEach((({index:e})=>{try{if(Array.isArray(e)){const{positions:n,index:i}=Rr(e);Dr(t.cssRules,n).deleteRule(i||0)}else null==t||t.deleteRule(e)}catch(n){}})),e.replace)try{null===(r=t.replace)||void 0===r||r.call(t,e.replace)}catch(o){}if(e.replaceSync)try{null===(s=t.replaceSync)||void 0===s||s.call(t,e.replaceSync)}catch(o){}}applyStyleDeclaration(e,t){e.set&&Dr(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority),e.remove&&Dr(t.rules,e.index).style.removeProperty(e.remove.property)}applyAdoptedStyleSheet(e){var t;const n=this.mirror.getNode(e.id);if(!n)return;null===(t=e.styles)||void 0===t||t.forEach((e=>{var t;let i=null,r=null;if(Tr(n)?r=(null===(t=n.ownerDocument)||void 0===t?void 0:t.defaultView)||null:"#document"===n.nodeName&&(r=n.defaultView),r)try{i=new r.CSSStyleSheet,this.styleMirror.add(i,e.styleId),this.applyStyleSheetRule({source:Or.StyleSheetRule,adds:e.rules},i)}catch(s){}}));let i=0;const r=(e,t)=>{const n=t.map((e=>this.styleMirror.getStyle(e))).filter((e=>null!==e));Tr(e)?e.shadowRoot.adoptedStyleSheets=n:"#document"===e.nodeName&&(e.adoptedStyleSheets=n),n.length!==t.length&&i<10&&(setTimeout((()=>r(e,t)),0+100*i),i++)};r(n,e.styleIds)}legacy_resolveMissingNode(e,t,n,i){const{previousId:r,nextId:s}=i,o=r&&e[r],a=s&&e[s];if(o){const{node:i,mutation:r}=o;t.insertBefore(i,n),delete e[r.node.id],delete this.legacy_missingNodeRetryMap[r.node.id],(r.previousId||r.nextId)&&this.legacy_resolveMissingNode(e,t,i,r)}if(a){const{node:i,mutation:r}=a;t.insertBefore(i,n.nextSibling),delete e[r.node.id],delete this.legacy_missingNodeRetryMap[r.node.id],(r.previousId||r.nextId)&&this.legacy_resolveMissingNode(e,t,i,r)}}moveAndHover(e,t,n,i,r){const s=this.mirror.getNode(n);if(!s)return this.debugNodeNotFound(r,n);const o=xr(s,this.iframe),a=e*o.absoluteScale+o.x,l=t*o.absoluteScale+o.y;this.mouse.style.left=`${a}px`,this.mouse.style.top=`${l}px`,i||this.drawMouseTail({x:a,y:l}),this.hoverElements(s)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:t,lineWidth:n,strokeStyle:i,duration:r}=!0===this.config.mouseTail?_o:Object.assign({},_o,this.config.mouseTail),s=()=>{if(!this.mouseTail)return;const e=this.mouseTail.getContext("2d");e&&this.tailPositions.length&&(e.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),e.beginPath(),e.lineWidth=n,e.lineCap=t,e.strokeStyle=i,e.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach((t=>e.lineTo(t.x,t.y))),e.stroke())};this.tailPositions.push(e),s(),setTimeout((()=>{this.tailPositions=this.tailPositions.filter((t=>t!==e)),s()}),r/this.speedService.state.context.timer.speed)}hoverElements(e){var t;null===(t=this.iframe.contentDocument)||void 0===t||t.querySelectorAll(".\\:hover").forEach((e=>{e.classList.remove(":hover")}));let n=e;for(;n;)n.classList&&n.classList.add(":hover"),n=n.parentElement}isUserInteraction(e){return e.type===Fr.IncrementalSnapshot&&e.data.source>Or.Mutation&&e.data.source<=Or.Input}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(Ur.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug("[replayer]",`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&console.warn("[replayer]",...e)}debug(...e){this.config.showDebug}}function Ao(e){let t="";return Object.keys(e).forEach((n=>{t+=`${n}: ${e[n]};`})),t}function Eo(e,t=2){let n=String(e);const i=Math.pow(10,t-1);if(e<i)for(;String(i).length>n.length;)n=`0${e}`;return n}function No(e){if(e<=0)return"00:00";const t=Math.floor(e/36e5);e%=36e5;const n=Math.floor(e/6e4);e%=6e4;const i=Math.floor(e/1e3);return t?`${Eo(t)}:${Eo(n)}:${Eo(i)}`:`${Eo(n)}:${Eo(i)}`}function ko(){let e=!1;return["fullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement"].forEach((t=>{t in document&&(e=e||Boolean(document[t]))})),e}function So(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]}function xo(e){return e.type===Fr.IncrementalSnapshot&&e.data.source>Or.Mutation&&e.data.source<=Or.Input}function To(e){let t,n,i,r,s,o,a,l,c;return{c(){t=Si("div"),n=Si("input"),i=Di(),r=Si("label"),s=Di(),o=Si("span"),a=Ti(e[3]),Mi(n,"type","checkbox"),Mi(n,"id",e[2]),n.disabled=e[1],Mi(n,"class","svelte-9brlez"),Mi(r,"for",e[2]),Mi(r,"class","svelte-9brlez"),Mi(o,"class","label svelte-9brlez"),Mi(t,"class","switch svelte-9brlez"),Bi(t,"disabled",e[1])},m(d,h){Ei(d,t,h),Ai(t,n),n.checked=e[0],Ai(t,i),Ai(t,r),Ai(t,s),Ai(t,o),Ai(o,a),l||(c=Ri(n,"change",e[4]),l=!0)},p(e,[i]){4&i&&Mi(n,"id",e[2]),2&i&&(n.disabled=e[1]),1&i&&(n.checked=e[0]),4&i&&Mi(r,"for",e[2]),8&i&&Fi(a,e[3]),2&i&&Bi(t,"disabled",e[1])},i:mi,o:mi,d(e){e&&Ni(t),l=!1,c()}}}function Do(e,t,n){let{disabled:i}=t,{checked:r}=t,{id:s}=t,{label:o}=t;return e.$$set=e=>{"disabled"in e&&n(1,i=e.disabled),"checked"in e&&n(0,r=e.checked),"id"in e&&n(2,s=e.id),"label"in e&&n(3,o=e.label)},[r,i,s,o,function(){r=this.checked,n(0,r)}]}class Ro extends cr{constructor(e){super(),lr(this,e,Do,To,Ci,{disabled:1,checked:0,id:2,label:3})}}function Mo(e,t,n){const i=e.slice();return i[39]=t[n],i}function Fo(e,t,n){const i=e.slice();return i[42]=t[n],i}function Oo(e,t,n){const i=e.slice();return i[45]=t[n],i}function Bo(e){let t,n,i,r,s,o,a,l,c,d,h,u,f,p,g,m,y,v,b,w,_,C,I,A,E,N,k=No(e[6])+"",S=No(e[8].totalTime)+"",x=e[14],T=[];for(let L=0;L<x.length;L+=1)T[L]=zo(Oo(e,x,L));let D=e[9],R=[];for(let L=0;L<D.length;L+=1)R[L]=Uo(Fo(e,D,L));function M(e,t){return"playing"===e[7]?Lo:Zo}let F=M(e),O=F(e),B=e[3],z=[];for(let L=0;L<B.length;L+=1)z[L]=Vo(Mo(e,B,L));function U(t){e[30](t)}let Z={id:"skip",disabled:"skipping"===e[10],label:"skip inactive"};return void 0!==e[0]&&(Z.checked=e[0]),w=new Ro({props:Z}),Wi.push((()=>function(e,t,n){const i=e.$$.props.checked;void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}(w,0,U))),{c(){t=Si("div"),n=Si("div"),i=Si("span"),r=Ti(k),s=Di(),o=Si("div"),a=Si("div"),l=Di();for(let e=0;e<T.length;e+=1)T[e].c();c=Di();for(let e=0;e<R.length;e+=1)R[e].c();d=Di(),h=Si("div"),u=Di(),f=Si("span"),p=Ti(S),g=Di(),m=Si("div"),y=Si("button"),O.c(),v=Di();for(let e=0;e<z.length;e+=1)z[e].c();b=Di(),sr(w.$$.fragment),C=Di(),I=Si("button"),I.innerHTML='<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M916 380c-26.4 0-48-21.6-48-48L868 223.2 613.6 477.6c-18.4\n            18.4-48.8 18.4-68 0-18.4-18.4-18.4-48.8 0-68L800 156 692 156c-26.4\n            0-48-21.6-48-48 0-26.4 21.6-48 48-48l224 0c26.4 0 48 21.6 48 48l0\n            224C964 358.4 942.4 380 916 380zM231.2 860l108.8 0c26.4 0 48 21.6 48\n            48s-21.6 48-48 48l-224 0c-26.4 0-48-21.6-48-48l0-224c0-26.4 21.6-48\n            48-48 26.4 0 48 21.6 48 48L164 792l253.6-253.6c18.4-18.4 48.8-18.4\n            68 0 18.4 18.4 18.4 48.8 0 68L231.2 860z" p-id="1286"></path></svg>',Mi(i,"class","rr-timeline__time svelte-19ke1iv"),Mi(a,"class","rr-progress__step svelte-19ke1iv"),Oi(a,"width",e[13]),Mi(h,"class","rr-progress__handler svelte-19ke1iv"),Oi(h,"left",e[13]),Mi(o,"class","rr-progress svelte-19ke1iv"),Bi(o,"disabled","skipping"===e[10]),Mi(f,"class","rr-timeline__time svelte-19ke1iv"),Mi(n,"class","rr-timeline svelte-19ke1iv"),Mi(y,"class","svelte-19ke1iv"),Mi(I,"class","svelte-19ke1iv"),Mi(m,"class","rr-controller__btns svelte-19ke1iv"),Mi(t,"class","rr-controller svelte-19ke1iv")},m(_,k){Ei(_,t,k),Ai(t,n),Ai(n,i),Ai(i,r),Ai(n,s),Ai(n,o),Ai(o,a),e[27](a),Ai(o,l);for(let e=0;e<T.length;e+=1)T[e].m(o,null);Ai(o,c);for(let e=0;e<R.length;e+=1)R[e].m(o,null);Ai(o,d),Ai(o,h),e[28](o),Ai(n,u),Ai(n,f),Ai(f,p),Ai(t,g),Ai(t,m),Ai(m,y),O.m(y,null),Ai(m,v);for(let e=0;e<z.length;e+=1)z[e].m(m,null);Ai(m,b),or(w,m,null),Ai(m,C),Ai(m,I),A=!0,E||(N=[Ri(o,"click",e[16]),Ri(y,"click",e[4]),Ri(I,"click",e[31])],E=!0)},p(e,t){if((!A||64&t[0])&&k!==(k=No(e[6])+"")&&Fi(r,k),(!A||8192&t[0])&&Oi(a,"width",e[13]),16384&t[0]){let n;for(x=e[14],n=0;n<x.length;n+=1){const i=Oo(e,x,n);T[n]?T[n].p(i,t):(T[n]=zo(i),T[n].c(),T[n].m(o,c))}for(;n<T.length;n+=1)T[n].d(1);T.length=x.length}if(512&t[0]){let n;for(D=e[9],n=0;n<D.length;n+=1){const i=Fo(e,D,n);R[n]?R[n].p(i,t):(R[n]=Uo(i),R[n].c(),R[n].m(o,d))}for(;n<R.length;n+=1)R[n].d(1);R.length=D.length}if((!A||8192&t[0])&&Oi(h,"left",e[13]),1024&t[0]&&Bi(o,"disabled","skipping"===e[10]),(!A||256&t[0])&&S!==(S=No(e[8].totalTime)+"")&&Fi(p,S),F!==(F=M(e))&&(O.d(1),O=F(e),O&&(O.c(),O.m(y,null))),1066&t[0]){let n;for(B=e[3],n=0;n<B.length;n+=1){const i=Mo(e,B,n);z[n]?z[n].p(i,t):(z[n]=Vo(i),z[n].c(),z[n].m(m,b))}for(;n<z.length;n+=1)z[n].d(1);z.length=B.length}const n={};var i;1024&t[0]&&(n.disabled="skipping"===e[10]),!_&&1&t[0]&&(_=!0,n.checked=e[0],i=()=>_=!1,Ki.push(i)),w.$set(n)},i(e){A||(ir(w.$$.fragment,e),A=!0)},o(e){rr(w.$$.fragment,e),A=!1},d(n){n&&Ni(t),e[27](null),ki(T,n),ki(R,n),e[28](null),O.d(),ki(z,n),ar(w),E=!1,wi(N)}}}function zo(e){let t,n;return{c(){t=Si("div"),Mi(t,"title",n=e[45].name),Oi(t,"width",e[45].width),Oi(t,"height","4px"),Oi(t,"position","absolute"),Oi(t,"background",e[45].background),Oi(t,"left",e[45].position)},m(e,n){Ei(e,t,n)},p(e,i){16384&i[0]&&n!==(n=e[45].name)&&Mi(t,"title",n),16384&i[0]&&Oi(t,"width",e[45].width),16384&i[0]&&Oi(t,"background",e[45].background),16384&i[0]&&Oi(t,"left",e[45].position)},d(e){e&&Ni(t)}}}function Uo(e){let t,n;return{c(){t=Si("div"),Mi(t,"title",n=e[42].name),Oi(t,"width","10px"),Oi(t,"height","5px"),Oi(t,"position","absolute"),Oi(t,"top","2px"),Oi(t,"transform","translate(-50%, -50%)"),Oi(t,"background",e[42].background),Oi(t,"left",e[42].position)},m(e,n){Ei(e,t,n)},p(e,i){512&i[0]&&n!==(n=e[42].name)&&Mi(t,"title",n),512&i[0]&&Oi(t,"background",e[42].background),512&i[0]&&Oi(t,"left",e[42].position)},d(e){e&&Ni(t)}}}function Zo(e){let t,n;return{c(){t=xi("svg"),n=xi("path"),Mi(n,"d","M170.65984 896l0-768 640 384zM644.66944\n              512l-388.66944-233.32864 0 466.65728z"),Mi(t,"class","icon"),Mi(t,"viewBox","0 0 1024 1024"),Mi(t,"version","1.1"),Mi(t,"xmlns","http://www.w3.org/2000/svg"),Mi(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),Mi(t,"width","16"),Mi(t,"height","16")},m(e,i){Ei(e,t,i),Ai(t,n)},d(e){e&&Ni(t)}}}function Lo(e){let t,n;return{c(){t=xi("svg"),n=xi("path"),Mi(n,"d","M682.65984 128q53.00224 0 90.50112 37.49888t37.49888 90.50112l0\n              512q0 53.00224-37.49888 90.50112t-90.50112\n              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224\n              37.49888-90.50112t90.50112-37.49888zM341.34016 128q53.00224 0\n              90.50112 37.49888t37.49888 90.50112l0 512q0 53.00224-37.49888\n              90.50112t-90.50112\n              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224\n              37.49888-90.50112t90.50112-37.49888zM341.34016 213.34016q-17.67424\n              0-30.16704 12.4928t-12.4928 30.16704l0 512q0 17.67424 12.4928\n              30.16704t30.16704 12.4928 30.16704-12.4928\n              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928zM682.65984\n              213.34016q-17.67424 0-30.16704 12.4928t-12.4928 30.16704l0 512q0\n              17.67424 12.4928 30.16704t30.16704 12.4928 30.16704-12.4928\n              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928z"),Mi(t,"class","icon"),Mi(t,"viewBox","0 0 1024 1024"),Mi(t,"version","1.1"),Mi(t,"xmlns","http://www.w3.org/2000/svg"),Mi(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),Mi(t,"width","16"),Mi(t,"height","16")},m(e,i){Ei(e,t,i),Ai(t,n)},d(e){e&&Ni(t)}}}function Vo(e){let t,n,i,r,s,o,a=e[39]+"";function l(){return e[29](e[39])}return{c(){t=Si("button"),n=Ti(a),i=Ti("x"),t.disabled=r="skipping"===e[10],Mi(t,"class","svelte-19ke1iv"),Bi(t,"active",e[39]===e[1]&&"skipping"!==e[10])},m(e,r){Ei(e,t,r),Ai(t,n),Ai(t,i),s||(o=Ri(t,"click",l),s=!0)},p(i,s){e=i,8&s[0]&&a!==(a=e[39]+"")&&Fi(n,a),1024&s[0]&&r!==(r="skipping"===e[10])&&(t.disabled=r),1034&s[0]&&Bi(t,"active",e[39]===e[1]&&"skipping"!==e[10])},d(e){e&&Ni(t),s=!1,o()}}}function Go(e){let t,n,i=e[2]&&Bo(e);return{c(){i&&i.c(),t=Ti("")},m(e,r){i&&i.m(e,r),Ei(e,t,r),n=!0},p(e,n){e[2]?i?(i.p(e,n),4&n[0]&&ir(i,1)):(i=Bo(e),i.c(),ir(i,1),i.m(t.parentNode,t)):i&&(tr(),rr(i,1,1,(()=>{i=null})),nr())},i(e){n||(ir(i),n=!0)},o(e){rr(i),n=!1},d(e){i&&i.d(e),e&&Ni(t)}}}function Wo(e,t,n){return(100-(t-n)/(t-e)*100).toFixed(2)}function $o(e,t,n){const i=function(){const e=Zi();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=function(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}(t,n,{cancelable:i});return r.slice().forEach((t=>{t.call(e,s)})),!s.defaultPrevented}return!0}}();let r,s,o,a,l,c,d,h,u,f,{replayer:p}=t,{showController:g}=t,{autoPlay:m}=t,{skipInactive:y}=t,{speedOption:v}=t,{speed:b=(v.length?v[0]:1)}=t,{tags:w={}}=t,{inactiveColor:_}=t,C=0,I=null,A=!1,E=null;const N=()=>{I&&(cancelAnimationFrame(I),I=null)},k=()=>{"paused"===r&&(l?(p.play(),l=!1):p.play(C))},S=()=>{"playing"===r&&(p.pause(),A=!1)},x=(e,t)=>{n(6,C=e),A=!1,("boolean"==typeof t?t:"playing"===r)?p.play(e):p.pause(e)},T=(e,t,i=!1,r)=>{E=i?{start:e,end:t}:null,n(6,C=e),A=t,c=r,p.play(e)},D=e=>{let t="playing"===r;n(1,b=e),t&&p.pause(),p.setConfig({speed:b}),t&&p.play(C)};var R;return Li((()=>{n(7,r=p.service.state.value),n(10,s=p.speedService.state.value),p.on("state-change",(e=>{const{player:t,speed:i}=e;if((null==t?void 0:t.value)&&r!==t.value)switch(n(7,r=t.value),r){case"playing":N(),I=requestAnimationFrame((function e(){n(6,C=p.getCurrentTime()),A&&C>=A&&(E?T(E.start,E.end,!0,void 0):(p.pause(),c&&(c(),c=null))),C<d.totalTime&&(I=requestAnimationFrame(e))}));break;case"paused":N()}(null==i?void 0:i.value)&&s!==i.value&&n(10,s=i.value)})),p.on("finish",(()=>{l=!0,c&&(c(),c=null)})),m&&p.play()})),R=()=>{y!==p.config.skipInactive&&p.setConfig({skipInactive:y})},Zi().$$.after_update.push(R),Vi((()=>{p.pause(),N()})),e.$$set=e=>{"replayer"in e&&n(17,p=e.replayer),"showController"in e&&n(2,g=e.showController),"autoPlay"in e&&n(18,m=e.autoPlay),"skipInactive"in e&&n(0,y=e.skipInactive),"speedOption"in e&&n(3,v=e.speedOption),"speed"in e&&n(1,b=e.speed),"tags"in e&&n(19,w=e.tags),"inactiveColor"in e&&n(20,_=e.inactiveColor)},e.$$.update=()=>{if(64&e.$$.dirty[0]&&i("ui-update-current-time",{payload:C}),128&e.$$.dirty[0]&&i("ui-update-player-state",{payload:r}),131072&e.$$.dirty[0]&&n(8,d=p.getMetaData()),320&e.$$.dirty[0]){const e=Math.min(1,C/d.totalTime);n(13,h=100*e+"%"),i("ui-update-progress",{payload:e})}655360&e.$$.dirty[0]&&n(9,u=(()=>{const{context:e}=p.service.state,t=e.events.length,n=e.events[0].timestamp,i=e.events[t-1].timestamp,r=[];return e.events.forEach((e=>{if(e.type===Fr.Custom){const t={name:e.data.tag,background:w[e.data.tag]||"rgb(73, 80, 246)",position:`${Wo(n,i,e.timestamp)}%`};r.push(t)}})),r})()),1179648&e.$$.dirty[0]&&n(14,f=(()=>{try{const{context:e}=p.service.state,t=e.events.length,n=e.events[0].timestamp,i=e.events[t-1].timestamp,r=function(e){const t=[];let n=e[0].timestamp;for(const i of e)xo(i)&&(i.timestamp-n>1e4&&t.push([n,i.timestamp]),n=i.timestamp);return t}(e.events),s=(e,t,n,i)=>((i-n)/(t-e)*100).toFixed(2);return r.map((e=>({name:"inactive period",background:_,position:`${Wo(n,i,e[0])}%`,width:`${s(n,i,e[0],e[1])}%`})))}catch(e){return[]}})())},[y,b,g,v,()=>{switch(r){case"playing":S();break;case"paused":k()}},D,C,r,d,u,s,o,a,h,f,i,e=>{if("skipping"===s)return;const t=o.getBoundingClientRect();let n=(e.clientX-t.left)/t.width;n<0?n=0:n>1&&(n=1);const i=d.totalTime*n;l=!1,x(i)},p,m,w,_,k,S,x,T,()=>{n(0,y=!y)},()=>Promise.resolve().then((()=>{n(8,d=p.getMetaData())})),function(e){Wi[e?"unshift":"push"]((()=>{a=e,n(12,a)}))},function(e){Wi[e?"unshift":"push"]((()=>{o=e,n(11,o)}))},e=>D(e),function(e){y=e,n(0,y)},()=>i("fullscreen")]}class Ko extends cr{constructor(e){super(),lr(this,e,$o,Go,Ci,{replayer:17,showController:2,autoPlay:18,skipInactive:0,speedOption:3,speed:1,tags:19,inactiveColor:20,toggle:4,play:21,pause:22,goto:23,playRange:24,setSpeed:5,toggleSkipInactive:25,triggerUpdateMeta:26},null,[-1,-1])}get toggle(){return this.$$.ctx[4]}get play(){return this.$$.ctx[21]}get pause(){return this.$$.ctx[22]}get goto(){return this.$$.ctx[23]}get playRange(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[5]}get toggleSkipInactive(){return this.$$.ctx[25]}get triggerUpdateMeta(){return this.$$.ctx[26]}}function Po(e){let t,n,i={replayer:e[7],showController:e[3],autoPlay:e[1],speedOption:e[2],skipInactive:e[0],tags:e[4],inactiveColor:e[5]};return t=new Ko({props:i}),e[32](t),t.$on("fullscreen",e[33]),{c(){sr(t.$$.fragment)},m(e,i){or(t,e,i),n=!0},p(e,n){const i={};128&n[0]&&(i.replayer=e[7]),8&n[0]&&(i.showController=e[3]),2&n[0]&&(i.autoPlay=e[1]),4&n[0]&&(i.speedOption=e[2]),1&n[0]&&(i.skipInactive=e[0]),16&n[0]&&(i.tags=e[4]),32&n[0]&&(i.inactiveColor=e[5]),t.$set(i)},i(e){n||(ir(t.$$.fragment,e),n=!0)},o(e){rr(t.$$.fragment,e),n=!1},d(n){e[32](null),ar(t,n)}}}function Yo(e){let t,n,i,r,s=e[7]&&Po(e);return{c(){t=Si("div"),n=Si("div"),i=Di(),s&&s.c(),Mi(n,"class","rr-player__frame"),Mi(n,"style",e[11]),Mi(t,"class","rr-player"),Mi(t,"style",e[12])},m(o,a){Ei(o,t,a),Ai(t,n),e[31](n),Ai(t,i),s&&s.m(t,null),e[34](t),r=!0},p(e,i){(!r||2048&i[0])&&Mi(n,"style",e[11]),e[7]?s?(s.p(e,i),128&i[0]&&ir(s,1)):(s=Po(e),s.c(),ir(s,1),s.m(t,null)):s&&(tr(),rr(s,1,1,(()=>{s=null})),nr()),(!r||4096&i[0])&&Mi(t,"style",e[12])},i(e){r||(ir(s),r=!0)},o(e){rr(s),r=!1},d(n){n&&Ni(t),e[31](null),s&&s.d(),e[34](null)}}}function Ho(e,t,n){let i,r,s,o,a,l,c,{width:d=1024}=t,{height:h=576}=t,{maxScale:u=1}=t,{events:f=[]}=t,{skipInactive:p=!0}=t,{autoPlay:g=!0}=t,{speedOption:m=[1,2,4,8]}=t,{speed:y=1}=t,{showController:v=!0}=t,{tags:b={}}=t,{inactiveColor:w="#D4D4D4"}=t,_=d,C=h;const I=(e,t)=>{const n=[d/t.width,h/t.height];u&&n.push(u),e.style.transform=`scale(${Math.min(...n)})translate(-50%, -50%)`},A=()=>{var e;r&&(ko()?document.exitFullscreen?document.exitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(e=r).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())};return Li((()=>{if(void 0!==m&&"array"!==So(m))throw new Error("speedOption must be array");if(m.forEach((e=>{if("number"!==So(e))throw new Error("item of speedOption must be number")})),m.indexOf(y)<0)throw new Error(`speed must be one of speedOption,\n        current config:\n        {\n          ...\n          speed: ${y},\n          speedOption: [${m.toString()}]\n          ...\n        }\n        `);var e;n(7,i=new Io(f,Object.assign({speed:y,root:s,unpackFn:Ys},t))),i.on("resize",(e=>{I(i.wrapper,e)})),e=()=>{ko()?setTimeout((()=>{_=d,C=h,n(13,d=r.offsetWidth),n(14,h=r.offsetHeight-(v?80:0)),I(i.wrapper,{width:i.iframe.offsetWidth,height:i.iframe.offsetHeight})}),0):(n(13,d=_),n(14,h=C),I(i.wrapper,{width:i.iframe.offsetWidth,height:i.iframe.offsetHeight}))},document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),o=()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}})),Vi((()=>{o&&o()})),e.$$set=e=>{n(39,t=yi(yi({},t),Ii(e))),"width"in e&&n(13,d=e.width),"height"in e&&n(14,h=e.height),"maxScale"in e&&n(15,u=e.maxScale),"events"in e&&n(16,f=e.events),"skipInactive"in e&&n(0,p=e.skipInactive),"autoPlay"in e&&n(1,g=e.autoPlay),"speedOption"in e&&n(2,m=e.speedOption),"speed"in e&&n(17,y=e.speed),"showController"in e&&n(3,v=e.showController),"tags"in e&&n(4,b=e.tags),"inactiveColor"in e&&n(5,w=e.inactiveColor)},e.$$.update=()=>{24576&e.$$.dirty[0]&&n(11,l=Ao({width:`${d}px`,height:`${h}px`})),24584&e.$$.dirty[0]&&n(12,c=Ao({width:`${d}px`,height:`${h+(v?80:0)}px`}))},t=Ii(t),[p,g,m,v,b,w,A,i,r,s,a,l,c,d,h,u,f,y,()=>i.getMirror(),()=>{I(i.wrapper,{width:i.iframe.offsetWidth,height:i.iframe.offsetHeight})},(e,t)=>{switch(i.on(e,t),e){case"ui-update-current-time":case"ui-update-progress":case"ui-update-player-state":a.$on(e,(({detail:e})=>t(e)))}},e=>{i.addEvent(e),a.triggerUpdateMeta()},()=>i.getMetaData(),()=>i,()=>{a.toggle()},e=>{a.setSpeed(e)},()=>{a.toggleSkipInactive()},()=>{a.play()},()=>{a.pause()},(e,t)=>{a.goto(e,t)},(e,t,n=!1,i)=>{a.playRange(e,t,n,i)},function(e){Wi[e?"unshift":"push"]((()=>{s=e,n(9,s)}))},function(e){Wi[e?"unshift":"push"]((()=>{a=e,n(10,a)}))},()=>A(),function(e){Wi[e?"unshift":"push"]((()=>{r=e,n(8,r)}))}]}class jo extends cr{constructor(e){super(),lr(this,e,Ho,Yo,Ci,{width:13,height:14,maxScale:15,events:16,skipInactive:0,autoPlay:1,speedOption:2,speed:17,showController:3,tags:4,inactiveColor:5,getMirror:18,triggerResize:19,toggleFullscreen:6,addEventListener:20,addEvent:21,getMetaData:22,getReplayer:23,toggle:24,setSpeed:25,toggleSkipInactive:26,play:27,pause:28,goto:29,playRange:30},null,[-1,-1])}get getMirror(){return this.$$.ctx[18]}get triggerResize(){return this.$$.ctx[19]}get toggleFullscreen(){return this.$$.ctx[6]}get addEventListener(){return this.$$.ctx[20]}get addEvent(){return this.$$.ctx[21]}get getMetaData(){return this.$$.ctx[22]}get getReplayer(){return this.$$.ctx[23]}get toggle(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[25]}get toggleSkipInactive(){return this.$$.ctx[26]}get play(){return this.$$.ctx[27]}get pause(){return this.$$.ctx[28]}get goto(){return this.$$.ctx[29]}get playRange(){return this.$$.ctx[30]}}class Qo extends jo{constructor(e){super({target:e.target,props:e.data||e.props})}}const Jo={class:"app-container"},Xo={class:"table-wrapper"},qo={class:"pager-wrapper mt20 justify-end"},ea={id:"revert",ref:"revert"};const ta=l({setup(){const{proxy:l}=i(),c=r({simpleUrl:"",data:n({format:["00:00:00","23:59:59"]})});let d=s({tableData:[],revertdialog:!1,fullscreen:!0});const{paginationData:h,handleCurrentChange:u,handleSizeChange:f}=e((()=>{p()})),p=async()=>{let e={page:h.currentPage,pageSize:h.pageSize,simpleUrl:c.value.simpleUrl,startTime:c.value.data[0],endTime:c.value.data[1]},n=await function(e){return t({url:"/adm/recordscreen/list",method:"post",data:e})}(e);n.success&&(h.total=n.model.count,d.tableData=n.model.list)};return o((()=>{p()})),{searchData:c,initQuery:p,resetSearch:()=>{c.value={simpleUrl:"",data:n({format:["00:00:00","23:59:59"]})}},data:d,paginationData:h,handleCurrentChange:u,handleSizeChange:f,goUserTrajectory:e=>{l.$router.push({path:"/user/behavior",query:{obj:JSON.stringify({uuId:e.uuId,startTime:c.value.data[0],endTime:c.value.data[1]})}})},getDetail:async e=>{let n={id:e.id},i=await function(e){return t({url:"/adm/recordscreen/video",method:"post",data:e})}(n);if(!i.success)return;let r=function(e){let t=te.atob(e).split("").map((function(e){return e.charCodeAt(0)})),n=new Uint8Array(t),i=gi.ungzip(n),r="";const s=8192;let o;for(o=0;o<i.length/s;o++)r+=String.fromCharCode.apply(null,i.slice(o*s,(o+1)*s));r+=String.fromCharCode.apply(null,i.slice(o*s));const a=te.decode(r);let l="";try{l=JSON.parse(a)}catch(c){/Unexpected token o in JSON at position 0/.test(c)&&(l=a)}return l}(i.model.events);d.revertdialog=!0,a((()=>{new Qo({target:document.getElementById("revert"),props:{events:r,UNSAFE_replayCanvas:!0}})}))}}}},[["render",function(e,t,n,i,r,s){const o=c("el-input"),a=c("el-form-item"),l=c("el-date-picker"),v=c("el-button"),b=c("el-form"),w=c("el-card"),_=c("el-table-column"),C=c("el-table"),I=c("el-pagination"),A=c("el-dialog");return d(),h(m,null,[u("div",Jo,[f(w,{shadow:"never",class:"search-wrapper"},{default:p((()=>[f(b,{ref:"searchFormRef",inline:!0,model:i.searchData},{default:p((()=>[f(a,{prop:"version",label:"URL"},{default:p((()=>[f(o,{modelValue:i.searchData.simpleUrl,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchData.simpleUrl=e),placeholder:""},null,8,["modelValue"])])),_:1}),f(a,{prop:"phone",label:""},{default:p((()=>[f(l,{modelValue:i.searchData.data,"onUpdate:modelValue":t[1]||(t[1]=e=>i.searchData.data=e),type:"datetimerange","range-separator":"-","start-placeholder":"","end-placeholder":""},null,8,["modelValue"])])),_:1}),f(a,null,{default:p((()=>[f(v,{type:"primary",onClick:i.initQuery},{default:p((()=>[y("")])),_:1},8,["onClick"]),f(v,{onClick:i.resetSearch},{default:p((()=>[y("")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),f(w,{class:"mt20"},{default:p((()=>[u("div",Xo,[f(C,{border:"",data:i.data.tableData},{default:p((()=>[f(_,{prop:"id",label:"ID",align:"center"}),f(_,{prop:"uuId",label:"ID",align:"center"}),f(_,{prop:"simpleUrl",label:"",align:"center"}),f(_,{prop:"error_desc",label:"",align:"center"}),f(_,{prop:"happenTime",label:"",align:"center"}),f(_,{label:"",align:"center"},{default:p((({row:e})=>[f(v,{type:"text",onClick:t=>i.getDetail(e)},{default:p((()=>[y("  ")])),_:2},1032,["onClick"]),f(v,{type:"text",onClick:t=>i.goUserTrajectory(e)},{default:p((()=>[y("  ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),u("div",qo,[f(I,{background:"",layout:i.paginationData.layout,"page-sizes":i.paginationData.pageSizes,total:i.paginationData.total,"page-size":i.paginationData.pageSize,currentPage:i.paginationData.currentPage,onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})]),f(A,{title:"",class:g({"revert-disalog":i.data.fullscreen}),top:"10vh",fullscreen:i.data.fullscreen,modelValue:i.data.revertdialog,"onUpdate:modelValue":t[2]||(t[2]=e=>i.data.revertdialog=e),width:"90%","destroy-on-close":!0},{default:p((()=>[u("div",ea,null,512)])),_:1},8,["class","fullscreen","modelValue"])],64)}]]);export{ta as default};
//# sourceMappingURL=list-6fde756e.js.map
